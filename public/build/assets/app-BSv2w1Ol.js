import{f as E,p as F,t as z,d as y,o as r,c as a,a as e,u as n,b as S,e as $,g as h,F as f,r as g,h as A,i as b,n as C,w as J,j as k,k as U,l as T,m as q,q as L,s as G}from"./vendor-czp6Momy.js";function N(o){return E(F(o),"yyyy-MM-dd HH:mm:ss")}function v(o){return z.parse(o)}function M(o){return o.display_name?v(o.display_name):o.username}const I={class:"badge bg-info ms-1"},P=["src"],R=["innerHTML"],K={class:"d-flex m-1 p-1"},Q={class:"flex-shrink-0"},X=["href"],Y=["src"],Z={class:"flex-grow-1 ms-3"},ee=["href","innerHTML"],te={class:"text-muted"},ne=["innerHTML"],oe=["innerHTML"],se=["href"],re=["src"],ae=["href"],le=y({__name:"TimelineReblog",props:{post:{}},setup(o){const l=o,s=l.post.reblog,t=l.post.reblog.account;return(u,_)=>(r(),a("div",null,[e("span",I,[e("img",{class:"rounded-circle toot-icon-small",src:u.post.account.avatar},null,8,P),e("span",{innerHTML:n(M)(u.post.account)},null,8,R),S(" reblogged ")]),e("div",K,[e("div",Q,[e("a",{href:n(t).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[e("img",{class:"rounded toot-icon",src:n(t).avatar},null,8,Y)],8,X)]),e("div",Z,[e("h4",null,[e("a",{href:n(t).url,innerHTML:n(M)(n(t)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,ee),e("small",te," @"+$(n(t).acct),1)]),n(s).spoiler_text.length>0?(r(),a("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:n(v)(n(s).spoiler_text),onClick:_[0]||(_[0]=i=>{n(s).spoiler_text=""})},null,8,ne)):h("",!0),n(s).spoiler_text?h("",!0):(r(),a("div",{key:1,innerHTML:n(v)(n(s).content)},null,8,oe)),n(s).media_attachments?(r(!0),a(f,{key:2},g(n(s).media_attachments,i=>(r(),a("div",null,[e("a",{href:i.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[e("img",{src:i.preview_url,class:"img-responsive img-thumbnail"},null,8,re)],8,se)]))),256)):h("",!0),e("div",null,[e("a",{href:n(s).url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},$(n(N)(n(s).created_at)),9,ae)])])])]))}}),ie={class:"d-flex p-1 m-1"},ce={class:"flex-shrink-0"},ue=["href"],de=["src"],_e={class:"flex-grow-1 ms-3"},pe=["href","innerHTML"],me={class:"text-muted"},he=["innerHTML"],fe=["innerHTML"],ge=["href"],be=["src"],ve=["href"],ke=y({__name:"TimelineStatus",props:{post:{}},setup(o){const s=o.post.account;return(t,u)=>(r(),a("div",ie,[e("div",ce,[e("a",{href:n(s).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[e("img",{class:"rounded toot-icon",src:n(s).avatar},null,8,de)],8,ue)]),e("div",_e,[e("h4",null,[e("a",{href:n(s).url,innerHTML:n(M)(n(s)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,pe),e("small",me," @"+$(n(s).acct),1)]),t.post.spoiler_text.length>0?(r(),a("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:n(v)(t.post.spoiler_text),onClick:u[0]||(u[0]=_=>{t.post.spoiler_text=""})},null,8,he)):h("",!0),t.post.spoiler_text?h("",!0):(r(),a("div",{key:1,innerHTML:n(v)(t.post.content)},null,8,fe)),t.post.media_attachments?(r(!0),a(f,{key:2},g(t.post.media_attachments,_=>(r(),a("div",null,[e("a",{href:_.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[e("img",{src:_.preview_url,class:"img-responsive img-thumbnail"},null,8,be)],8,ge)]))),256)):h("",!0),e("div",null,[e("a",{href:t.post.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},$(n(N)(t.post.created_at)),9,ve)])])]))}}),$e=(o,l)=>{const s=o.__vccOpts||o;for(const[t,u]of l)s[t]=u;return s},ye={},we={class:"card"},xe={class:"card bg-white"};function Te(o,l){return r(),a("div",we,[e("div",xe,[A(o.$slots,"default")])])}const Me=$e(ye,[["render",Te]]),He={class:"btn-group pe-1",role:"group"},Le=["onClick","innerHTML"],Se=y({__name:"TypeSwitch",emits:["changed"],setup(o,{emit:l}){const s=l,t=b("public:local"),u={user:'<i class="fa fa-home" aria-hidden="true"></i> User',"public:local":'<i class="fa fa-users" aria-hidden="true"></i> Local',public:'<i class="fa fa-globe" aria-hidden="true"></i> Federated'};function _(i){t.value=i,s("changed",i)}return(i,m)=>(r(),a("div",He,[(r(),a(f,null,g(u,(d,c)=>e("button",{type:"button",class:C(["btn btn-secondary",{active:t.value===c}]),onClick:w=>_(c),innerHTML:d},null,10,Le)),64))]))}}),Ce={class:"btn-group",role:"group"},Ne=["onClick","innerHTML"],Oe=y({__name:"MediaSwitch",emits:["changed"],setup(o,{emit:l}){const s=l,t=b("normal"),u={normal:'<i class="fa fa-file-image-o" aria-hidden="true"></i> Media Default',only:'<i class="fa fa-picture-o" aria-hidden="true"></i> Only',except:'<i class="fa fa-commenting-o" aria-hidden="true"></i> Except'};function _(i){t.value=i,s("changed",i)}return(i,m)=>(r(),a("div",Ce,[(r(),a(f,null,g(u,(d,c)=>e("button",{type:"button",class:C(["btn btn-secondary",{active:t.value===c}]),onClick:w=>_(c),innerHTML:d},null,10,Ne)),64))]))}});function Be(o,l,s,t){const u="/api/v1",i=b([]),m=b([]);let d=null;const c={user:"home","public:local":"public?local=true",public:"public"};J(()=>{w()});function w(){j(),fetch(D()+"/timelines/"+c[k(t)]+"?limit=20",{headers:{Authorization:"Bearer "+l}}).then(p=>p.json()).then(function(p){i.value=p,B()}).catch(function(p){console.error(p),m.value.push(p)})}function B(){V(p=>{switch(p.event){case"update":i.value.unshift(p.payload),i.value.splice(50);break;default:console.debug(p)}})}function V(p){d=new WebSocket(W()+"/streaming?access_token="+l+"&stream="+k(t)),d.onmessage=H=>{console.debug("Got Data from Stream "+k(t));let x=JSON.parse(H.data);x.payload=JSON.parse(x.payload),p(x)},d.onopen=()=>{console.debug("WebSocket Open "+o+" "+k(t))},d.onclose=H=>{console.debug("WebSocket Close "+o+" "+k(t))}}function j(){d!==null&&(d.close(),i.value=[])}function D(){return o+u}function W(){return s+u}return{posts:i,errors:m}}function Ve(o,l){switch(l){case"only":return o.media_attachments.length;case"except":return!o.media_attachments.length;default:return!0}}const je={class:"btn-toolbar mb-2",role:"toolbar","aria-label":"toolbar"},De={key:0,class:"alert alert-danger"},We=e("p",null,[e("strong",null,"Whoops!"),S(" Something went wrong!")],-1),Ee=e("hr",null,null,-1),Fe={__name:"UserTimeline",props:{domain:String,streaming:String,token:String},setup(o){const l=o,s=b("public:local"),t=b("normal"),{posts:u,errors:_}=Be(l.domain,l.token,l.streaming,s),i=U(()=>u.value.filter(m=>Ve(m,t.value)));return(m,d)=>(r(),a("div",null,[e("div",je,[T(Se,{onChanged:d[0]||(d[0]=c=>s.value=c)}),T(Oe,{onChanged:d[1]||(d[1]=c=>t.value=c)})]),n(_).length>0?(r(),a("div",De,[We,e("ul",null,[(r(!0),a(f,null,g(n(_),c=>(r(),a("li",null,$(c),1))),256))])])):h("",!0),T(Me,null,{default:q(()=>[(r(!0),a(f,null,g(i.value,c=>(r(),a("div",{key:c.id},[c.reblog?(r(),L(le,{key:0,post:c},null,8,["post"])):(r(),L(ke,{key:1,post:c},null,8,["post"])),Ee]))),128))]),_:1})]))}},O=G({});O.component("tt-user-timeline",Fe);O.mount("#app");v(document.body);
