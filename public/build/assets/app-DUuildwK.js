import{l as q,a as A,f as F,p as R,t as z,o as s,c as a,b as e,u as n,d as S,e as $,g,F as v,r as x,h as J,i as C,j as b,n as N,k as P,m as U,q as M,w as X,s as L,v as G}from"./vendor-Bt-H-7kd.js";window._=q;window.axios=A;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function O(t){return F(R(t),"yyyy-MM-dd HH:mm:ss")}function k(t){return z.parse(t)}function H(t){return t.display_name?k(t.display_name):t.username}const I={class:"badge bg-info ms-1"},K=["src"],Q=["innerHTML"],Y={class:"d-flex m-1 p-1"},Z={class:"flex-shrink-0"},ee=["href"],te=["src"],ne={class:"flex-grow-1 ms-3"},oe=["href","innerHTML"],se={class:"text-muted"},ae=["innerHTML"],le=["innerHTML"],re=["href"],ie=["src"],ce=["href"],ue={__name:"TimelineReblog",props:{post:Object},setup(t){const r=t,o=r.post.reblog,l=r.post.reblog.account;return(i,c)=>(s(),a("div",null,[e("span",I,[e("img",{class:"rounded-circle toot-icon-small",src:t.post.account.avatar},null,8,K),e("span",{innerHTML:n(H)(t.post.account)},null,8,Q),S(" reblogged ")]),e("div",Y,[e("div",Z,[e("a",{href:n(l).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[e("img",{class:"rounded toot-icon",src:n(l).avatar},null,8,te)],8,ee)]),e("div",ne,[e("h4",null,[e("a",{href:n(l).url,innerHTML:n(H)(n(l)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,oe),e("small",se," @"+$(n(l).acct),1)]),n(o).spoiler_text.length>0?(s(),a("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:n(k)(n(o).spoiler_text),onClick:c[0]||(c[0]=h=>{n(o).spoiler_text=""})},null,8,ae)):g("",!0),n(o).spoiler_text?g("",!0):(s(),a("div",{key:1,innerHTML:n(k)(n(o).content)},null,8,le)),n(o).media_attachments?(s(!0),a(v,{key:2},x(n(o).media_attachments,h=>(s(),a("div",null,[e("a",{href:h.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[e("img",{src:h.preview_url,class:"img-responsive img-thumbnail"},null,8,ie)],8,re)]))),256)):g("",!0),e("div",null,[e("a",{href:n(o).url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},$(n(O)(n(o).created_at)),9,ce)])])])]))}},de={class:"d-flex p-1 m-1"},_e={class:"flex-shrink-0"},me=["href"],he=["src"],pe={class:"flex-grow-1 ms-3"},fe=["href","innerHTML"],ge={class:"text-muted"},be=["innerHTML"],ve=["innerHTML"],xe=["href"],ke=["src"],ye=["href"],$e={__name:"TimelineStatus",props:{post:Object},setup(t){const o=t.post.account;return(l,i)=>(s(),a("div",de,[e("div",_e,[e("a",{href:n(o).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[e("img",{class:"rounded toot-icon",src:n(o).avatar},null,8,he)],8,me)]),e("div",pe,[e("h4",null,[e("a",{href:n(o).url,innerHTML:n(H)(n(o)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,fe),e("small",ge," @"+$(n(o).acct),1)]),t.post.spoiler_text.length>0?(s(),a("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:n(k)(t.post.spoiler_text),onClick:i[0]||(i[0]=c=>{t.post.spoiler_text=""})},null,8,be)):g("",!0),t.post.spoiler_text?g("",!0):(s(),a("div",{key:1,innerHTML:n(k)(t.post.content)},null,8,ve)),t.post.media_attachments?(s(!0),a(v,{key:2},x(t.post.media_attachments,c=>(s(),a("div",null,[e("a",{href:c.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[e("img",{src:c.preview_url,class:"img-responsive img-thumbnail"},null,8,ke)],8,xe)]))),256)):g("",!0),e("div",null,[e("a",{href:t.post.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},$(n(O)(t.post.created_at)),9,ye)])])]))}},we=(t,r)=>{const o=t.__vccOpts||t;for(const[l,i]of r)o[l]=i;return o},Me={},He={class:"card"},Le={class:"card bg-white"};function Te(t,r){return s(),a("div",He,[e("div",Le,[J(t.$slots,"default")])])}const Se=we(Me,[["render",Te]]),Ce={class:"btn-group pe-1",role:"group"},Ne=["onClick","innerHTML"],Oe=C({__name:"TypeSwitch",emits:["changed"],setup(t,{emit:r}){const o=r,l=b("public:local"),i={user:'<i class="fa fa-home" aria-hidden="true"></i> User',"public:local":'<i class="fa fa-users" aria-hidden="true"></i> Local',public:'<i class="fa fa-globe" aria-hidden="true"></i> Federated'};function c(h){l.value=h,o("changed",h)}return(h,f)=>(s(),a("div",Ce,[(s(),a(v,null,x(i,(y,p)=>e("button",{type:"button",class:N(["btn btn-secondary",{active:l.value===p}]),onClick:w=>c(p),innerHTML:y},null,10,Ne)),64))]))}}),je={class:"btn-group",role:"group"},Be=["onClick","innerHTML"],De=C({__name:"MediaSwitch",emits:["changed"],setup(t,{emit:r}){const o=r,l=b("normal"),i={normal:'<i class="fa fa-file-image-o" aria-hidden="true"></i> Media Default',only:'<i class="fa fa-picture-o" aria-hidden="true"></i> Only',except:'<i class="fa fa-commenting-o" aria-hidden="true"></i> Except'};function c(h){l.value=h,o("changed",h)}return(h,f)=>(s(),a("div",je,[(s(),a(v,null,x(i,(y,p)=>e("button",{type:"button",class:N(["btn btn-secondary",{active:l.value===p}]),onClick:w=>c(p),innerHTML:y},null,10,Be)),64))]))}}),Ee={class:"btn-toolbar mb-2",role:"toolbar","aria-label":"toolbar"},Ve={key:0,class:"alert alert-danger"},We=e("p",null,[e("strong",null,"Whoops!"),S(" Something went wrong!")],-1),qe=e("hr",null,null,-1),T="/api/v1",Ae=50,Fe={__name:"UserTimeline",props:{domain:String,streaming:String,token:String},setup(t){const r=t,o=b("public:local"),l=b("normal"),i=b([]),c=b([]),h={user:"home","public:local":"public?local=true",public:"public"};let f=null;const y=P(()=>i.value.filter(u=>E(u)));U(()=>p());function p(u="public:local"){D(),o.value=u,axios.get(V()+"/timelines/"+h[u]+"?limit=20",{headers:{Authorization:"Bearer "+r.token}}).then(d=>{i.value=d.data,w(u)}).catch(d=>{console.log(d),typeof d.response.data=="object"?c.value=_.flatten(_.toArray(d.response.data)):c.value=["Something went wrong. Please try again."]})}function w(u="public:local"){B(u,d=>{d.event==="notification"?console.log(d):d.event==="update"&&(i.value.unshift(d.payload),i.value.splice(Ae))})}function B(u,d){f=new WebSocket(W()+"/streaming?access_token="+r.token+"&stream="+u),f.onmessage=m=>{console.log("Got Data from Stream "+u),m=JSON.parse(m.data),m.payload=JSON.parse(m.payload),d(m)},f.onclose=m=>{console.log("WebSocket Close "+u)}}function D(){_.isNull(f)||(f.close(),i.value=[])}function E(u){return l.value==="only"?!_.isEmpty(u.media_attachments):l.value==="except"?_.isEmpty(u.media_attachments):!0}function V(){return r.domain+T}function W(){return r.streaming+T}return(u,d)=>(s(),a("div",null,[e("div",Ee,[M(Oe,{onChanged:p}),M(De,{onChanged:d[0]||(d[0]=m=>l.value=m)})]),c.value.length>0?(s(),a("div",Ve,[We,e("ul",null,[(s(!0),a(v,null,x(c.value,m=>(s(),a("li",null,$(m),1))),256))])])):g("",!0),M(Se,null,{default:X(()=>[(s(!0),a(v,null,x(y.value,m=>(s(),a("div",{key:m.id},[m.reblog?(s(),L(ue,{key:0,post:m},null,8,["post"])):(s(),L($e,{key:1,post:m},null,8,["post"])),qe]))),128))]),_:1})]))}},j=G({});j.component("tt-user-timeline",Fe);j.mount("#app");k(document.body);
