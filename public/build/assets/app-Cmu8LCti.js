import{f as F,p as W,t as z,d as y,o as a,c as r,a as e,u as n,b as S,e as k,g as h,F as f,r as g,h as A,i as b,n as C,w as J,j as $,k as U,l as T,m as q,q as L,s as G}from"./vendor-czp6Momy.js";function N(s){return F(W(s),"yyyy-MM-dd HH:mm:ss")}function v(s){return z.parse(s)}function M(s){return s.display_name?v(s.display_name):s.username}const I={class:"badge bg-info ms-1"},P=["src"],R=["innerHTML"],K={class:"d-flex m-1 p-1"},Q={class:"flex-shrink-0"},X=["href"],Y=["src"],Z={class:"flex-grow-1 ms-3"},ee=["href","innerHTML"],te={class:"text-muted"},ne=["innerHTML"],oe=["innerHTML"],se=["href"],ae=["src"],re=["href"],le=y({__name:"TimelineReblog",props:{post:{}},setup(s){const l=s,o=l.post.reblog,t=l.post.reblog.account;return(u,_)=>(a(),r("div",null,[e("span",I,[e("img",{class:"rounded-circle toot-icon-small",src:u.post.account.avatar},null,8,P),e("span",{innerHTML:n(M)(u.post.account)},null,8,R),S(" reblogged ")]),e("div",K,[e("div",Q,[e("a",{href:n(t).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[e("img",{class:"rounded toot-icon",src:n(t).avatar},null,8,Y)],8,X)]),e("div",Z,[e("h4",null,[e("a",{href:n(t).url,innerHTML:n(M)(n(t)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,ee),e("small",te," @"+k(n(t).acct),1)]),n(o).spoiler_text.length>0?(a(),r("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:n(v)(n(o).spoiler_text),onClick:_[0]||(_[0]=c=>{n(o).spoiler_text=""})},null,8,ne)):h("",!0),n(o).spoiler_text?h("",!0):(a(),r("div",{key:1,innerHTML:n(v)(n(o).content)},null,8,oe)),n(o).media_attachments?(a(!0),r(f,{key:2},g(n(o).media_attachments,c=>(a(),r("div",null,[e("a",{href:c.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[e("img",{src:c.preview_url,class:"img-responsive img-thumbnail"},null,8,ae)],8,se)]))),256)):h("",!0),e("div",null,[e("a",{href:n(o).url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},k(n(N)(n(o).created_at)),9,re)])])])]))}}),ce={class:"d-flex p-1 m-1"},ie={class:"flex-shrink-0"},ue=["href"],de=["src"],_e={class:"flex-grow-1 ms-3"},pe=["href","innerHTML"],me={class:"text-muted"},he=["innerHTML"],fe=["innerHTML"],ge=["href"],be=["src"],ve=["href"],ke=y({__name:"TimelineStatus",props:{post:{}},setup(s){const o=s.post.account;return(t,u)=>(a(),r("div",ce,[e("div",ie,[e("a",{href:n(o).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[e("img",{class:"rounded toot-icon",src:n(o).avatar},null,8,de)],8,ue)]),e("div",_e,[e("h4",null,[e("a",{href:n(o).url,innerHTML:n(M)(n(o)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,pe),e("small",me," @"+k(n(o).acct),1)]),t.post.spoiler_text.length>0?(a(),r("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:n(v)(t.post.spoiler_text),onClick:u[0]||(u[0]=_=>{t.post.spoiler_text=""})},null,8,he)):h("",!0),t.post.spoiler_text?h("",!0):(a(),r("div",{key:1,innerHTML:n(v)(t.post.content)},null,8,fe)),t.post.media_attachments?(a(!0),r(f,{key:2},g(t.post.media_attachments,_=>(a(),r("div",null,[e("a",{href:_.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[e("img",{src:_.preview_url,class:"img-responsive img-thumbnail"},null,8,be)],8,ge)]))),256)):h("",!0),e("div",null,[e("a",{href:t.post.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},k(n(N)(t.post.created_at)),9,ve)])])]))}}),$e=(s,l)=>{const o=s.__vccOpts||s;for(const[t,u]of l)o[t]=u;return o},ye={},we={class:"card"},xe={class:"card bg-white"};function Te(s,l){return a(),r("div",we,[e("div",xe,[A(s.$slots,"default")])])}const Me=$e(ye,[["render",Te]]),He={class:"btn-group pe-1",role:"group"},Le=["onClick","innerHTML"],Se=y({__name:"TypeSwitch",emits:["changed"],setup(s,{emit:l}){const o=l,t=b("public:local"),u={user:'<i class="fa fa-home" aria-hidden="true"></i> User',"public:local":'<i class="fa fa-users" aria-hidden="true"></i> Local',public:'<i class="fa fa-globe" aria-hidden="true"></i> Federated'};function _(c){t.value=c,o("changed",c)}return(c,m)=>(a(),r("div",He,[(a(),r(f,null,g(u,(p,i)=>e("button",{type:"button",class:C(["btn btn-secondary",{active:t.value===i}]),onClick:w=>_(i),innerHTML:p},null,10,Le)),64))]))}}),Ce={class:"btn-group",role:"group"},Ne=["onClick","innerHTML"],Be=y({__name:"MediaSwitch",emits:["changed"],setup(s,{emit:l}){const o=l,t=b("normal"),u={normal:'<i class="fa fa-file-image-o" aria-hidden="true"></i> Media Default',only:'<i class="fa fa-picture-o" aria-hidden="true"></i> Only',except:'<i class="fa fa-commenting-o" aria-hidden="true"></i> Except'};function _(c){t.value=c,o("changed",c)}return(c,m)=>(a(),r("div",Ce,[(a(),r(f,null,g(u,(p,i)=>e("button",{type:"button",class:C(["btn btn-secondary",{active:t.value===i}]),onClick:w=>_(i),innerHTML:p},null,10,Ne)),64))]))}});function Oe(s,l,o,t){const u="/api/v1",c=b([]),m=b([]);let p=null;const i={user:"home","public:local":"public?local=true",public:"public"};J(()=>{w()});function w(){j(),fetch(D()+"/timelines/"+i[$(t)]+"?limit=20",{headers:{Authorization:"Bearer "+l}}).then(d=>d.json()).then(function(d){c.value=d,O()}).catch(function(d){console.error(d),m.value.push(d)})}function O(){V(d=>{switch(d.event){case"update":c.value.unshift(d.payload),c.value.splice(50);break;case"announcement":console.debug(d);break;case"notification":console.debug(d);break;case"delete":console.debug(d);break;case"status.update":console.debug(d);break;default:console.debug(d)}})}function V(d){p=new WebSocket(E()+"/streaming?access_token="+l+"&stream="+$(t)),p.onmessage=H=>{console.debug("Got Data from Stream "+$(t));let x=JSON.parse(H.data);x.payload=JSON.parse(x.payload),d(x)},p.onclose=H=>{console.log("WebSocket Close "+$(t))}}function j(){p!==null&&(p.close(),c.value=[])}function D(){return s+u}function E(){return o+u}return{posts:c,errors:m}}function Ve(s,l){switch(l){case"only":return s.media_attachments.length;case"except":return!s.media_attachments.length;default:return!0}}const je={class:"btn-toolbar mb-2",role:"toolbar","aria-label":"toolbar"},De={key:0,class:"alert alert-danger"},Ee=e("p",null,[e("strong",null,"Whoops!"),S(" Something went wrong!")],-1),Fe=e("hr",null,null,-1),We={__name:"UserTimeline",props:{domain:String,streaming:String,token:String},setup(s){const l=s,o=b("public:local"),t=b("normal"),{posts:u,errors:_}=Oe(l.domain,l.token,l.streaming,o),c=U(()=>u.value.filter(m=>Ve(m,t.value)));return(m,p)=>(a(),r("div",null,[e("div",je,[T(Se,{onChanged:p[0]||(p[0]=i=>o.value=i)}),T(Be,{onChanged:p[1]||(p[1]=i=>t.value=i)})]),n(_).length>0?(a(),r("div",De,[Ee,e("ul",null,[(a(!0),r(f,null,g(n(_),i=>(a(),r("li",null,k(i),1))),256))])])):h("",!0),T(Me,null,{default:q(()=>[(a(!0),r(f,null,g(c.value,i=>(a(),r("div",{key:i.id},[i.reblog?(a(),L(le,{key:0,post:i},null,8,["post"])):(a(),L(ke,{key:1,post:i},null,8,["post"])),Fe]))),128))]),_:1})]))}},B=G({});B.component("tt-user-timeline",We);B.mount("#app");v(document.body);
