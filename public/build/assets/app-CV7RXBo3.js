import{f as F,p as z,t as A,d as w,o as r,c as a,a as e,u as n,b as S,e as y,g as f,F as g,r as b,h as J,i as v,n as N,w as U,j as $,k as q,l as H,m as G,q as C,s as I}from"./vendor-czp6Momy.js";function O(s){return F(z(s),"yyyy-MM-dd HH:mm:ss")}function k(s){return A.parse(s)}function L(s){return s.display_name?k(s.display_name):s.username}const R={class:"badge bg-info ms-1"},K=["src"],P=["innerHTML"],Q={class:"d-flex m-1 p-1"},X={class:"flex-shrink-0"},Y=["href"],Z=["src"],ee={class:"flex-grow-1 ms-3"},te=["href","innerHTML"],ne={class:"text-muted"},oe=["innerHTML"],se=["innerHTML"],re=["href"],ae=["src"],le=["href"],ce=w({__name:"TimelineReblog",props:{post:{}},setup(s){const c=s,o=c.post.reblog,t=c.post.reblog.account;return(u,_)=>(r(),a("div",null,[e("span",R,[e("img",{class:"rounded-circle toot-icon-small",src:u.post.account.avatar},null,8,K),e("span",{innerHTML:n(L)(u.post.account)},null,8,P),S(" reblogged ")]),e("div",Q,[e("div",X,[e("a",{href:n(t).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[e("img",{class:"rounded toot-icon",src:n(t).avatar},null,8,Z)],8,Y)]),e("div",ee,[e("h4",null,[e("a",{href:n(t).url,innerHTML:n(L)(n(t)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,te),e("small",ne," @"+y(n(t).acct),1)]),n(o).spoiler_text.length>0?(r(),a("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:n(k)(n(o).spoiler_text),onClick:_[0]||(_[0]=l=>{n(o).spoiler_text=""})},null,8,oe)):f("",!0),n(o).spoiler_text?f("",!0):(r(),a("div",{key:1,innerHTML:n(k)(n(o).content)},null,8,se)),n(o).media_attachments?(r(!0),a(g,{key:2},b(n(o).media_attachments,l=>(r(),a("div",null,[e("a",{href:l.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[e("img",{src:l.preview_url,class:"img-responsive img-thumbnail"},null,8,ae)],8,re)]))),256)):f("",!0),e("div",null,[e("a",{href:n(o).url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},y(n(O)(n(o).created_at)),9,le)])])])]))}}),ie={class:"d-flex p-1 m-1"},ue={class:"flex-shrink-0"},de=["href"],_e=["src"],pe={class:"flex-grow-1 ms-3"},me=["href","innerHTML"],he={class:"text-muted"},fe=["innerHTML"],ge=["innerHTML"],be=["href"],ve=["src"],ke=["href"],$e=w({__name:"TimelineStatus",props:{post:{}},setup(s){const o=s.post.account;return(t,u)=>(r(),a("div",ie,[e("div",ue,[e("a",{href:n(o).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[e("img",{class:"rounded toot-icon",src:n(o).avatar},null,8,_e)],8,de)]),e("div",pe,[e("h4",null,[e("a",{href:n(o).url,innerHTML:n(L)(n(o)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,me),e("small",he," @"+y(n(o).acct),1)]),t.post.spoiler_text.length>0?(r(),a("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:n(k)(t.post.spoiler_text),onClick:u[0]||(u[0]=_=>{t.post.spoiler_text=""})},null,8,fe)):f("",!0),t.post.spoiler_text?f("",!0):(r(),a("div",{key:1,innerHTML:n(k)(t.post.content)},null,8,ge)),t.post.media_attachments?(r(!0),a(g,{key:2},b(t.post.media_attachments,_=>(r(),a("div",null,[e("a",{href:_.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[e("img",{src:_.preview_url,class:"img-responsive img-thumbnail"},null,8,ve)],8,be)]))),256)):f("",!0),e("div",null,[e("a",{href:t.post.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},y(n(O)(t.post.created_at)),9,ke)])])]))}}),ye=(s,c)=>{const o=s.__vccOpts||s;for(const[t,u]of c)o[t]=u;return o},we={},xe={class:"card"},Te={class:"card bg-white"};function Me(s,c){return r(),a("div",xe,[e("div",Te,[J(s.$slots,"default")])])}const He=ye(we,[["render",Me]]),Le={class:"btn-group pe-1",role:"group"},Ce=["onClick","innerHTML"],Se=w({__name:"TypeSwitch",emits:["changed"],setup(s,{emit:c}){const o=c,t=v("public:local"),u={user:'<i class="fa fa-home" aria-hidden="true"></i> User',"public:local":'<i class="fa fa-users" aria-hidden="true"></i> Local',public:'<i class="fa fa-globe" aria-hidden="true"></i> Federated'};function _(l){t.value=l,o("changed",l)}return(l,m)=>(r(),a("div",Le,[(r(),a(g,null,b(u,(d,i)=>e("button",{type:"button",class:N(["btn btn-secondary",{active:t.value===i}]),onClick:x=>_(i),innerHTML:d},null,10,Ce)),64))]))}}),Ne={class:"btn-group",role:"group"},Oe=["onClick","innerHTML"],Be=w({__name:"MediaSwitch",emits:["changed"],setup(s,{emit:c}){const o=c,t=v("normal"),u={normal:'<i class="fa fa-file-image-o" aria-hidden="true"></i> Media Default',only:'<i class="fa fa-picture-o" aria-hidden="true"></i> Only',except:'<i class="fa fa-commenting-o" aria-hidden="true"></i> Except'};function _(l){t.value=l,o("changed",l)}return(l,m)=>(r(),a("div",Ne,[(r(),a(g,null,b(u,(d,i)=>e("button",{type:"button",class:N(["btn btn-secondary",{active:t.value===i}]),onClick:x=>_(i),innerHTML:d},null,10,Oe)),64))]))}});function Ve(s,c,o,t){const u="/api/v1",l=v([]),m=v([]);let d=null;const i={user:"home","public:local":"public?local=true",public:"public"};U(()=>{x()});function x(){D();const h=W()+"/timelines/"+i[$(t)]+"?limit=20",T={headers:{Authorization:"Bearer "+o}};fetch(h,T).then(p=>p.json()).then(function(p){l.value=p,V()}).catch(function(p){console.error(p),m.value.push(p)})}function V(){j(h=>{switch(h.event){case"update":l.value.unshift(h.payload),l.value.splice(50);break;default:console.debug(h)}})}function j(h){const T=E()+"/streaming?access_token="+o+"&stream="+$(t);d=new WebSocket(T),d.onmessage=p=>{console.debug("Got Data from Stream "+$(t));let M=JSON.parse(p.data);M.payload=JSON.parse(M.payload),h(M)},d.onopen=()=>{console.debug("WebSocket Open "+s+" "+$(t))},d.onclose=p=>{console.debug("WebSocket Close "+s+" "+$(t))}}function D(){d!==null&&(d.close(),l.value=[])}function W(){return s+u}function E(){return c+u}return{posts:l,errors:m}}function je(s,c){switch(c){case"only":return s.media_attachments.length>0;case"except":return!s.media_attachments.length;default:return!0}}const De={class:"btn-toolbar mb-2",role:"toolbar","aria-label":"toolbar"},We={key:0,class:"alert alert-danger"},Ee=e("p",null,[e("strong",null,"Whoops!"),S(" Something went wrong!")],-1),Fe=e("hr",null,null,-1),ze=w({__name:"UserTimeline",props:{domain:{},streaming:{},token:{}},setup(s){const c=s,o=v("public:local"),t=v("normal"),{posts:u,errors:_}=Ve(c.domain,c.streaming,c.token,o),l=q(()=>u.value.filter(m=>je(m,t.value)));return(m,d)=>(r(),a("div",null,[e("div",De,[H(Se,{onChanged:d[0]||(d[0]=i=>o.value=i)}),H(Be,{onChanged:d[1]||(d[1]=i=>t.value=i)})]),n(_).length>0?(r(),a("div",We,[Ee,e("ul",null,[(r(!0),a(g,null,b(n(_),i=>(r(),a("li",null,y(i),1))),256))])])):f("",!0),H(He,null,{default:G(()=>[(r(!0),a(g,null,b(l.value,i=>(r(),a("div",{key:i.id},[i.reblog?(r(),C(ce,{key:0,post:i},null,8,["post"])):(r(),C($e,{key:1,post:i},null,8,["post"])),Fe]))),128))]),_:1})]))}}),B=I({});B.component("tt-user-timeline",ze);B.mount("#app");k(document.body);
