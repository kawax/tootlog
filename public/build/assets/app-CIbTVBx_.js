import{l as A,a as F,f as R,p as z,t as J,o as n,c as o,b as t,u,d as N,e as x,g as h,F as b,r as p,h as P,i as y,n as O,j as U,k as X,m as T,w as G,q as C,s as I}from"./vendor-BKh_N5hN.js";window._=A;window.axios=F;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function j(e){return R(z(e),"yyyy-MM-dd HH:mm:ss")}function v(e){return J.parse(e)}function w(e){return e.display_name?v(e.display_name):e.username}const K={class:"badge bg-info ms-1"},Q=["src"],Y=["innerHTML"],Z={class:"d-flex m-1 p-1"},ee={class:"flex-shrink-0"},te=["href"],ne=["src"],oe={class:"flex-grow-1 ms-3"},se=["href","innerHTML"],ae={class:"text-muted"},le=["innerHTML"],re=["innerHTML"],ie=["href"],ce=["src"],ue=["href"],de={__name:"TimelineReblog",props:{post:Object},setup(e){return(c,s)=>(n(),o("div",null,[t("span",K,[t("img",{class:"rounded-circle toot-icon-small",src:e.post.account.avatar},null,8,Q),t("span",{innerHTML:u(w)(e.post.account)},null,8,Y),N(" reblogged ")]),t("div",Z,[t("div",ee,[t("a",{href:e.post.reblog.account.url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[t("img",{class:"rounded toot-icon",src:e.post.reblog.account.avatar},null,8,ne)],8,te)]),t("div",oe,[t("h4",null,[t("a",{href:e.post.reblog.account.url,innerHTML:u(w)(e.post.reblog.account),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,se),t("small",ae," @"+x(e.post.reblog.account.acct),1)]),e.post.reblog.spoiler_text.length>0?(n(),o("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:u(v)(e.post.reblog.spoiler_text),onClick:s[0]||(s[0]=i=>{e.post.reblog.spoiler_text=""})},null,8,le)):h("",!0),e.post.reblog.spoiler_text?h("",!0):(n(),o("div",{key:1,innerHTML:u(v)(e.post.reblog.content)},null,8,re)),e.post.reblog.media_attachments?(n(!0),o(b,{key:2},p(e.post.reblog.media_attachments,i=>(n(),o("div",null,[t("a",{href:i.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[t("img",{src:i.preview_url,class:"img-responsive img-thumbnail"},null,8,ce)],8,ie)]))),256)):h("",!0),t("div",null,[t("a",{href:e.post.reblog.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},x(u(j)(e.post.reblog.created_at)),9,ue)])])])]))}},me={class:"d-flex p-1 m-1"},he={class:"flex-shrink-0"},fe=["href"],_e=["src"],ge={class:"flex-grow-1 ms-3"},be=["href","innerHTML"],pe={class:"text-muted"},ve=["innerHTML"],xe=["innerHTML"],ke=["href"],ye=["src"],$e=["href"],we={__name:"TimelineStatus",props:{post:Object},setup(e){return(c,s)=>(n(),o("div",me,[t("div",he,[t("a",{href:e.post.account.url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[t("img",{class:"rounded toot-icon",src:e.post.account.avatar},null,8,_e)],8,fe)]),t("div",ge,[t("h4",null,[t("a",{href:e.post.account.url,innerHTML:u(w)(e.post.account),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,be),t("small",pe," @"+x(e.post.account.acct),1)]),e.post.spoiler_text.length>0?(n(),o("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:u(v)(e.post.spoiler_text),onClick:s[0]||(s[0]=i=>{e.post.spoiler_text=""})},null,8,ve)):h("",!0),e.post.spoiler_text?h("",!0):(n(),o("div",{key:1,innerHTML:u(v)(e.post.content)},null,8,xe)),e.post.media_attachments?(n(!0),o(b,{key:2},p(e.post.media_attachments,i=>(n(),o("div",null,[t("a",{href:i.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[t("img",{src:i.preview_url,class:"img-responsive img-thumbnail"},null,8,ye)],8,ke)]))),256)):h("",!0),t("div",null,[t("a",{href:e.post.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},x(u(j)(e.post.created_at)),9,$e)])])]))}},Me=(e,c)=>{const s=e.__vccOpts||e;for(const[i,d]of c)s[i]=d;return s},He={},Le={class:"card"},Te={class:"card bg-white"};function Ce(e,c){return n(),o("div",Le,[t("div",Te,[P(e.$slots,"default")])])}const Se=Me(He,[["render",Ce]]),Ne={class:"btn-group",role:"group"},Oe=["onClick","innerHTML"],je={__name:"MediaSwitch",emits:["mediaChanged"],setup(e,{emit:c}){const s=c,i=y("normal"),d={normal:'<i class="fa fa-file-image-o" aria-hidden="true"></i> Media Default',only:'<i class="fa fa-picture-o" aria-hidden="true"></i> Only',except:'<i class="fa fa-commenting-o" aria-hidden="true"></i> Except'};function $(m){i.value=m,s("mediaChanged",m)}return(m,f)=>(n(),o("div",Ne,[(n(),o(b,null,p(d,(g,k)=>t("button",{type:"button",class:O(["btn btn-secondary",{active:i.value===k}]),onClick:M=>$(k),innerHTML:g},null,10,Oe)),64))]))}},Be={class:"btn-toolbar mb-2",role:"toolbar","aria-label":"toolbar"},De={class:"btn-group pe-1",role:"group"},Ee=["onClick","innerHTML"],Ve={key:0,class:"alert alert-danger"},We=t("p",null,[t("strong",null,"Whoops!"),N(" Something went wrong!")],-1),qe=t("hr",null,null,-1),S="/api/v1",Ae=50,Fe={__name:"UserTimeline",props:{domain:String,streaming:String,token:String},setup(e){const c=e;let s=null;const i={user:'<i class="fa fa-home" aria-hidden="true"></i> User',"public:local":'<i class="fa fa-users" aria-hidden="true"></i> Local',public:'<i class="fa fa-globe" aria-hidden="true"></i> Federated'},d=y("public:local"),$={user:"home","public:local":"public?local=true",public:"public"},m=y("normal"),f=y([]);let g=[];const k=U(()=>f.value.filter(l=>q(l)));X(()=>H(d.value));function M(){return c.domain+S}function D(){return c.streaming+S}function H(l="public:local"){W(),d.value=l,axios.get(M()+"/timelines/"+$[l]+"?limit=20",{headers:{Authorization:"Bearer "+c.token}}).then(r=>{f.value=r.data,E(l)}).catch(r=>{console.log(r),typeof r.response.data=="object"?g=_.flatten(_.toArray(r.response.data)):g=["Something went wrong. Please try again."]})}function E(l="public:local"){V(l,r=>{r.event==="notification"?console.log(r):r.event==="update"&&(f.value.unshift(r.payload),f.value.splice(Ae))})}function V(l,r){s=new WebSocket(D()+"/streaming?access_token="+c.token+"&stream="+l),s.onmessage=a=>{console.log("Got Data from Stream "+l),a=JSON.parse(a.data),a.payload=JSON.parse(a.payload),r(a)},s.onclose=a=>{console.log("WebSocket Close "+l)}}function W(){_.isNull(s)||(s.close(),f.value=[])}function q(l){return m.value==="only"?!_.isEmpty(l.media_attachments):m.value==="except"?_.isEmpty(l.media_attachments):!0}return(l,r)=>(n(),o("div",null,[t("div",Be,[t("div",De,[(n(),o(b,null,p(i,(a,L)=>t("button",{type:"button",class:O(["btn btn-secondary",{active:d.value===L}]),onClick:Re=>{H(L)},innerHTML:a},null,10,Ee)),64))]),T(je,{onMediaChanged:r[0]||(r[0]=a=>m.value=a)})]),u(g).length>0?(n(),o("div",Ve,[We,t("ul",null,[(n(!0),o(b,null,p(u(g),a=>(n(),o("li",null,x(a),1))),256))])])):h("",!0),T(Se,null,{default:G(()=>[(n(!0),o(b,null,p(k.value,a=>(n(),o("div",null,[a.reblog?(n(),C(de,{key:0,post:a},null,8,["post"])):(n(),C(we,{key:1,post:a},null,8,["post"])),qe]))),256))]),_:1})]))}},B=I({});B.component("tt-user-timeline",Fe);B.mount("#app");v(document.body);
