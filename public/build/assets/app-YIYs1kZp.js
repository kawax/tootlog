import{l as W,a as q,f as A,p as F,t as R,o as n,c as o,b as t,u as a,d as C,e as $,g,F as v,r as x,h as z,i as b,n as S,j as J,k as P,m as M,w as U,q as H,s as X}from"./vendor-BKh_N5hN.js";window._=W;window.axios=q;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function N(e){return A(F(e),"yyyy-MM-dd HH:mm:ss")}function y(e){return R.parse(e)}function T(e){return e.display_name?y(e.display_name):e.username}const G={class:"badge bg-info ms-1"},I=["src"],K=["innerHTML"],Q={class:"d-flex m-1 p-1"},Y={class:"flex-shrink-0"},Z=["href"],ee=["src"],te={class:"flex-grow-1 ms-3"},ne=["href","innerHTML"],oe={class:"text-muted"},se=["innerHTML"],ae=["innerHTML"],le=["href"],re=["src"],ie=["href"],ce={__name:"TimelineReblog",props:{post:Object},setup(e){const s=e.post.reblog.account;return(m,l)=>(n(),o("div",null,[t("span",G,[t("img",{class:"rounded-circle toot-icon-small",src:e.post.account.avatar},null,8,I),t("span",{innerHTML:a(T)(e.post.account)},null,8,K),C(" reblogged ")]),t("div",Q,[t("div",Y,[t("a",{href:a(s).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[t("img",{class:"rounded toot-icon",src:a(s).avatar},null,8,ee)],8,Z)]),t("div",te,[t("h4",null,[t("a",{href:a(s).url,innerHTML:a(T)(a(s)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,ne),t("small",oe," @"+$(a(s).acct),1)]),e.post.reblog.spoiler_text.length>0?(n(),o("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:a(y)(e.post.reblog.spoiler_text),onClick:l[0]||(l[0]=r=>{e.post.reblog.spoiler_text=""})},null,8,se)):g("",!0),e.post.reblog.spoiler_text?g("",!0):(n(),o("div",{key:1,innerHTML:a(y)(e.post.reblog.content)},null,8,ae)),e.post.reblog.media_attachments?(n(!0),o(v,{key:2},x(e.post.reblog.media_attachments,r=>(n(),o("div",null,[t("a",{href:r.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[t("img",{src:r.preview_url,class:"img-responsive img-thumbnail"},null,8,re)],8,le)]))),256)):g("",!0),t("div",null,[t("a",{href:e.post.reblog.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},$(a(N)(e.post.reblog.created_at)),9,ie)])])])]))}},ue={class:"d-flex p-1 m-1"},de={class:"flex-shrink-0"},_e=["href"],me=["src"],he={class:"flex-grow-1 ms-3"},pe=["href","innerHTML"],fe={class:"text-muted"},ge=["innerHTML"],be=["innerHTML"],ve=["href"],xe=["src"],ye=["href"],ke={__name:"TimelineStatus",props:{post:Object},setup(e){const s=e.post.account;return(m,l)=>(n(),o("div",ue,[t("div",de,[t("a",{href:a(s).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[t("img",{class:"rounded toot-icon",src:a(s).avatar},null,8,me)],8,_e)]),t("div",he,[t("h4",null,[t("a",{href:a(s).url,innerHTML:a(T)(a(s)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,pe),t("small",fe," @"+$(a(s).acct),1)]),e.post.spoiler_text.length>0?(n(),o("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:a(y)(e.post.spoiler_text),onClick:l[0]||(l[0]=r=>{e.post.spoiler_text=""})},null,8,ge)):g("",!0),e.post.spoiler_text?g("",!0):(n(),o("div",{key:1,innerHTML:a(y)(e.post.content)},null,8,be)),e.post.media_attachments?(n(!0),o(v,{key:2},x(e.post.media_attachments,r=>(n(),o("div",null,[t("a",{href:r.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[t("img",{src:r.preview_url,class:"img-responsive img-thumbnail"},null,8,xe)],8,ve)]))),256)):g("",!0),t("div",null,[t("a",{href:e.post.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},$(a(N)(e.post.created_at)),9,ye)])])]))}},$e=(e,d)=>{const s=e.__vccOpts||e;for(const[m,l]of d)s[m]=l;return s},we={},Me={class:"card"},Te={class:"card bg-white"};function He(e,d){return n(),o("div",Me,[t("div",Te,[z(e.$slots,"default")])])}const Le=$e(we,[["render",He]]),Ce={class:"btn-group pe-1",role:"group"},Se=["onClick","innerHTML"],Ne={__name:"TypeSwitch",emits:["typeChanged"],setup(e,{emit:d}){const s=d,m=b("public:local"),l={user:'<i class="fa fa-home" aria-hidden="true"></i> User',"public:local":'<i class="fa fa-users" aria-hidden="true"></i> Local',public:'<i class="fa fa-globe" aria-hidden="true"></i> Federated'};function r(h){m.value=h,s("typeChanged",h)}return(h,f)=>(n(),o("div",Ce,[(n(),o(v,null,x(l,(k,p)=>t("button",{type:"button",class:S(["btn btn-secondary",{active:m.value===p}]),onClick:w=>r(p),innerHTML:k},null,10,Se)),64))]))}},Oe={class:"btn-group",role:"group"},je=["onClick","innerHTML"],Be={__name:"MediaSwitch",emits:["mediaChanged"],setup(e,{emit:d}){const s=d,m=b("normal"),l={normal:'<i class="fa fa-file-image-o" aria-hidden="true"></i> Media Default',only:'<i class="fa fa-picture-o" aria-hidden="true"></i> Only',except:'<i class="fa fa-commenting-o" aria-hidden="true"></i> Except'};function r(h){m.value=h,s("mediaChanged",h)}return(h,f)=>(n(),o("div",Oe,[(n(),o(v,null,x(l,(k,p)=>t("button",{type:"button",class:S(["btn btn-secondary",{active:m.value===p}]),onClick:w=>r(p),innerHTML:k},null,10,je)),64))]))}},De={class:"btn-toolbar mb-2",role:"toolbar","aria-label":"toolbar"},Ee={key:0,class:"alert alert-danger"},Ve=t("p",null,[t("strong",null,"Whoops!"),C(" Something went wrong!")],-1),We=t("hr",null,null,-1),L="/api/v1",qe=50,Ae={__name:"UserTimeline",props:{domain:String,streaming:String,token:String},setup(e){const d=e,s=b("public:local"),m=b("normal"),l=b([]),r=b([]),h={user:"home","public:local":"public?local=true",public:"public"};let f=null;const k=J(()=>l.value.filter(i=>D(i)));P(()=>p());function p(i="public:local"){B(),s.value=i,axios.get(E()+"/timelines/"+h[i]+"?limit=20",{headers:{Authorization:"Bearer "+d.token}}).then(c=>{l.value=c.data,w(i)}).catch(c=>{console.log(c),typeof c.response.data=="object"?r.value=_.flatten(_.toArray(c.response.data)):r.value=["Something went wrong. Please try again."]})}function w(i="public:local"){j(i,c=>{c.event==="notification"?console.log(c):c.event==="update"&&(l.value.unshift(c.payload),l.value.splice(qe))})}function j(i,c){f=new WebSocket(V()+"/streaming?access_token="+d.token+"&stream="+i),f.onmessage=u=>{console.log("Got Data from Stream "+i),u=JSON.parse(u.data),u.payload=JSON.parse(u.payload),c(u)},f.onclose=u=>{console.log("WebSocket Close "+i)}}function B(){_.isNull(f)||(f.close(),l.value=[])}function D(i){return m.value==="only"?!_.isEmpty(i.media_attachments):m.value==="except"?_.isEmpty(i.media_attachments):!0}function E(){return d.domain+L}function V(){return d.streaming+L}return(i,c)=>(n(),o("div",null,[t("div",De,[M(Ne,{onTypeChanged:p}),M(Be,{onMediaChanged:c[0]||(c[0]=u=>m.value=u)})]),r.value.length>0?(n(),o("div",Ee,[Ve,t("ul",null,[(n(!0),o(v,null,x(r.value,u=>(n(),o("li",null,$(u),1))),256))])])):g("",!0),M(Le,null,{default:U(()=>[(n(!0),o(v,null,x(k.value,u=>(n(),o("div",null,[u.reblog?(n(),H(ce,{key:0,post:u},null,8,["post"])):(n(),H(ke,{key:1,post:u},null,8,["post"])),We]))),256))]),_:1})]))}},O=X({});O.component("tt-user-timeline",Ae);O.mount("#app");y(document.body);
