import{l as W,a as q,f as A,p as F,t as R,o as n,c as o,b as t,u as m,d as C,e as $,g as p,F as v,r as x,h as z,i as b,n as S,j as J,k as P,m as M,w as U,q as H,s as X}from"./vendor-BKh_N5hN.js";window._=W;window.axios=q;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function N(e){return A(F(e),"yyyy-MM-dd HH:mm:ss")}function y(e){return R.parse(e)}function T(e){return e.display_name?y(e.display_name):e.username}const G={class:"badge bg-info ms-1"},I=["src"],K=["innerHTML"],Q={class:"d-flex m-1 p-1"},Y={class:"flex-shrink-0"},Z=["href"],ee=["src"],te={class:"flex-grow-1 ms-3"},ne=["href","innerHTML"],oe={class:"text-muted"},se=["innerHTML"],ae=["innerHTML"],le=["href"],re=["src"],ie=["href"],ce={__name:"TimelineReblog",props:{post:Object},setup(e){return(c,r)=>(n(),o("div",null,[t("span",G,[t("img",{class:"rounded-circle toot-icon-small",src:e.post.account.avatar},null,8,I),t("span",{innerHTML:m(T)(e.post.account)},null,8,K),C(" reblogged ")]),t("div",Q,[t("div",Y,[t("a",{href:e.post.reblog.account.url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[t("img",{class:"rounded toot-icon",src:e.post.reblog.account.avatar},null,8,ee)],8,Z)]),t("div",te,[t("h4",null,[t("a",{href:e.post.reblog.account.url,innerHTML:m(T)(e.post.reblog.account),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,ne),t("small",oe," @"+$(e.post.reblog.account.acct),1)]),e.post.reblog.spoiler_text.length>0?(n(),o("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:m(y)(e.post.reblog.spoiler_text),onClick:r[0]||(r[0]=s=>{e.post.reblog.spoiler_text=""})},null,8,se)):p("",!0),e.post.reblog.spoiler_text?p("",!0):(n(),o("div",{key:1,innerHTML:m(y)(e.post.reblog.content)},null,8,ae)),e.post.reblog.media_attachments?(n(!0),o(v,{key:2},x(e.post.reblog.media_attachments,s=>(n(),o("div",null,[t("a",{href:s.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[t("img",{src:s.preview_url,class:"img-responsive img-thumbnail"},null,8,re)],8,le)]))),256)):p("",!0),t("div",null,[t("a",{href:e.post.reblog.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},$(m(N)(e.post.reblog.created_at)),9,ie)])])])]))}},ue={class:"d-flex p-1 m-1"},de={class:"flex-shrink-0"},me=["href"],_e=["src"],he={class:"flex-grow-1 ms-3"},fe=["href","innerHTML"],ge={class:"text-muted"},pe=["innerHTML"],be=["innerHTML"],ve=["href"],xe=["src"],ye=["href"],ke={__name:"TimelineStatus",props:{post:Object},setup(e){return(c,r)=>(n(),o("div",ue,[t("div",de,[t("a",{href:e.post.account.url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[t("img",{class:"rounded toot-icon",src:e.post.account.avatar},null,8,_e)],8,me)]),t("div",he,[t("h4",null,[t("a",{href:e.post.account.url,innerHTML:m(T)(e.post.account),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,fe),t("small",ge," @"+$(e.post.account.acct),1)]),e.post.spoiler_text.length>0?(n(),o("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:m(y)(e.post.spoiler_text),onClick:r[0]||(r[0]=s=>{e.post.spoiler_text=""})},null,8,pe)):p("",!0),e.post.spoiler_text?p("",!0):(n(),o("div",{key:1,innerHTML:m(y)(e.post.content)},null,8,be)),e.post.media_attachments?(n(!0),o(v,{key:2},x(e.post.media_attachments,s=>(n(),o("div",null,[t("a",{href:s.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[t("img",{src:s.preview_url,class:"img-responsive img-thumbnail"},null,8,xe)],8,ve)]))),256)):p("",!0),t("div",null,[t("a",{href:e.post.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},$(m(N)(e.post.created_at)),9,ye)])])]))}},$e=(e,c)=>{const r=e.__vccOpts||e;for(const[s,u]of c)r[s]=u;return r},we={},Me={class:"card"},Te={class:"card bg-white"};function He(e,c){return n(),o("div",Me,[t("div",Te,[z(e.$slots,"default")])])}const Le=$e(we,[["render",He]]),Ce={class:"btn-group pe-1",role:"group"},Se=["onClick","innerHTML"],Ne={__name:"TypeSwitch",emits:["typeChanged"],setup(e,{emit:c}){const r=c,s=b("public:local"),u={user:'<i class="fa fa-home" aria-hidden="true"></i> User',"public:local":'<i class="fa fa-users" aria-hidden="true"></i> Local',public:'<i class="fa fa-globe" aria-hidden="true"></i> Federated'};function h(d){s.value=d,r("typeChanged",d)}return(d,g)=>(n(),o("div",Ce,[(n(),o(v,null,x(u,(k,f)=>t("button",{type:"button",class:S(["btn btn-secondary",{active:s.value===f}]),onClick:w=>h(f),innerHTML:k},null,10,Se)),64))]))}},Oe={class:"btn-group",role:"group"},je=["onClick","innerHTML"],Be={__name:"MediaSwitch",emits:["mediaChanged"],setup(e,{emit:c}){const r=c,s=b("normal"),u={normal:'<i class="fa fa-file-image-o" aria-hidden="true"></i> Media Default',only:'<i class="fa fa-picture-o" aria-hidden="true"></i> Only',except:'<i class="fa fa-commenting-o" aria-hidden="true"></i> Except'};function h(d){s.value=d,r("mediaChanged",d)}return(d,g)=>(n(),o("div",Oe,[(n(),o(v,null,x(u,(k,f)=>t("button",{type:"button",class:S(["btn btn-secondary",{active:s.value===f}]),onClick:w=>h(f),innerHTML:k},null,10,je)),64))]))}},De={class:"btn-toolbar mb-2",role:"toolbar","aria-label":"toolbar"},Ee={key:0,class:"alert alert-danger"},Ve=t("p",null,[t("strong",null,"Whoops!"),C(" Something went wrong!")],-1),We=t("hr",null,null,-1),L="/api/v1",qe=50,Ae={__name:"UserTimeline",props:{domain:String,streaming:String,token:String},setup(e){const c=e,r=b("public:local"),s=b("normal"),u=b([]),h=b([]),d={user:"home","public:local":"public?local=true",public:"public"};let g=null;const k=J(()=>u.value.filter(a=>D(a)));P(()=>f());function f(a="public:local"){B(),r.value=a,axios.get(E()+"/timelines/"+d[a]+"?limit=20",{headers:{Authorization:"Bearer "+c.token}}).then(l=>{u.value=l.data,w(a)}).catch(l=>{console.log(l),typeof l.response.data=="object"?h.value=_.flatten(_.toArray(l.response.data)):h.value=["Something went wrong. Please try again."]})}function w(a="public:local"){j(a,l=>{l.event==="notification"?console.log(l):l.event==="update"&&(u.value.unshift(l.payload),u.value.splice(qe))})}function j(a,l){g=new WebSocket(V()+"/streaming?access_token="+c.token+"&stream="+a),g.onmessage=i=>{console.log("Got Data from Stream "+a),i=JSON.parse(i.data),i.payload=JSON.parse(i.payload),l(i)},g.onclose=i=>{console.log("WebSocket Close "+a)}}function B(){_.isNull(g)||(g.close(),u.value=[])}function D(a){return s.value==="only"?!_.isEmpty(a.media_attachments):s.value==="except"?_.isEmpty(a.media_attachments):!0}function E(){return c.domain+L}function V(){return c.streaming+L}return(a,l)=>(n(),o("div",null,[t("div",De,[M(Ne,{onTypeChanged:f}),M(Be,{onMediaChanged:l[0]||(l[0]=i=>s.value=i)})]),h.value.length>0?(n(),o("div",Ee,[Ve,t("ul",null,[(n(!0),o(v,null,x(h.value,i=>(n(),o("li",null,$(i),1))),256))])])):p("",!0),M(Le,null,{default:U(()=>[(n(!0),o(v,null,x(k.value,i=>(n(),o("div",null,[i.reblog?(n(),H(ce,{key:0,post:i},null,8,["post"])):(n(),H(ke,{key:1,post:i},null,8,["post"])),We]))),256))]),_:1})]))}},O=X({});O.component("tt-user-timeline",Ae);O.mount("#app");y(document.body);
