import{f as A,p as E,t as J,d as w,o as a,c as r,a as t,u as n,b as S,e as y,g as f,F as g,r as b,h as U,i as v,w as L,n as N,j as $,k as q,l as M,m as G,q as C,s as I}from"./vendor-czp6Momy.js";function B(s){return A(E(s),"yyyy-MM-dd HH:mm:ss")}function k(s){return J.parse(s)}function H(s){return s.display_name?k(s.display_name):s.username}const R={class:"badge bg-info ms-1"},K=["src"],P=["innerHTML"],Q={class:"d-flex m-1 p-1"},X={class:"flex-shrink-0"},Y=["href"],Z=["src"],ee={class:"flex-grow-1 ms-3"},te=["href","innerHTML"],ne={class:"text-muted"},oe=["innerHTML"],se=["innerHTML"],ae=["href"],re=["src"],le=["href"],ie=w({__name:"TimelineReblog",props:{post:{}},setup(s){const l=s,o=l.post.reblog,e=l.post.reblog.account;return(c,_)=>(a(),r("div",null,[t("span",R,[t("img",{class:"rounded-circle toot-icon-small",src:c.post.account.avatar},null,8,K),t("span",{innerHTML:n(H)(c.post.account)},null,8,P),S(" reblogged ")]),t("div",Q,[t("div",X,[t("a",{href:n(e).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[t("img",{class:"rounded toot-icon",src:n(e).avatar},null,8,Z)],8,Y)]),t("div",ee,[t("h4",null,[t("a",{href:n(e).url,innerHTML:n(H)(n(e)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,te),t("small",ne," @"+y(n(e).acct),1)]),n(o).spoiler_text.length>0?(a(),r("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:n(k)(n(o).spoiler_text),onClick:_[0]||(_[0]=d=>{n(o).spoiler_text=""})},null,8,oe)):f("",!0),n(o).spoiler_text?f("",!0):(a(),r("div",{key:1,innerHTML:n(k)(n(o).content)},null,8,se)),n(o).media_attachments?(a(!0),r(g,{key:2},b(n(o).media_attachments,d=>(a(),r("div",null,[t("a",{href:d.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[t("img",{src:d.preview_url,class:"img-responsive img-thumbnail"},null,8,re)],8,ae)]))),256)):f("",!0),t("div",null,[t("a",{href:n(o).url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},y(n(B)(n(o).created_at)),9,le)])])])]))}}),ce={class:"d-flex p-1 m-1"},ue={class:"flex-shrink-0"},de=["href"],_e=["src"],pe={class:"flex-grow-1 ms-3"},me=["href","innerHTML"],he={class:"text-muted"},fe=["innerHTML"],ge=["innerHTML"],be=["href"],ve=["src"],ke=["href"],$e=w({__name:"TimelineStatus",props:{post:{}},setup(s){const o=s.post.account;return(e,c)=>(a(),r("div",ce,[t("div",ue,[t("a",{href:n(o).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[t("img",{class:"rounded toot-icon",src:n(o).avatar},null,8,_e)],8,de)]),t("div",pe,[t("h4",null,[t("a",{href:n(o).url,innerHTML:n(H)(n(o)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,me),t("small",he," @"+y(n(o).acct),1)]),e.post.spoiler_text.length>0?(a(),r("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:n(k)(e.post.spoiler_text),onClick:c[0]||(c[0]=_=>{e.post.spoiler_text=""})},null,8,fe)):f("",!0),e.post.spoiler_text?f("",!0):(a(),r("div",{key:1,innerHTML:n(k)(e.post.content)},null,8,ge)),e.post.media_attachments?(a(!0),r(g,{key:2},b(e.post.media_attachments,_=>(a(),r("div",null,[t("a",{href:_.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[t("img",{src:_.preview_url,class:"img-responsive img-thumbnail"},null,8,ve)],8,be)]))),256)):f("",!0),t("div",null,[t("a",{href:e.post.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},y(n(B)(e.post.created_at)),9,ke)])])]))}}),ye=(s,l)=>{const o=s.__vccOpts||s;for(const[e,c]of l)o[e]=c;return o},we={},xe={class:"card"},Te={class:"card bg-white"};function Me(s,l){return a(),r("div",xe,[t("div",Te,[U(s.$slots,"default")])])}const He=ye(we,[["render",Me]]),Le={class:"btn-group pe-1",role:"group"},Ce=["onClick","innerHTML"],Se=w({__name:"TypeSwitch",emits:["changed"],setup(s,{emit:l}){const o=l,e=v("public:local"),c={user:'<i class="fa fa-home" aria-hidden="true"></i> User',"public:local":'<i class="fa fa-users" aria-hidden="true"></i> Local',public:'<i class="fa fa-globe" aria-hidden="true"></i> Federated'};return L(()=>o("changed",e.value)),(_,d)=>(a(),r("div",Le,[(a(),r(g,null,b(c,(p,i)=>t("button",{type:"button",class:N(["btn btn-secondary",{active:e.value===i}]),onClick:u=>e.value=i,innerHTML:p},null,10,Ce)),64))]))}}),Ne={class:"btn-group",role:"group"},Be=["onClick","innerHTML"],Oe=w({__name:"MediaSwitch",emits:["changed"],setup(s,{emit:l}){const o=l,e=v("normal"),c={normal:'<i class="fa fa-file-image-o" aria-hidden="true"></i> Text and Media',only:'<i class="fa fa-picture-o" aria-hidden="true"></i> Media',except:'<i class="fa fa-commenting-o" aria-hidden="true"></i> Text'};return L(()=>o("changed",e.value)),(_,d)=>(a(),r("div",Ne,[(a(),r(g,null,b(c,(p,i)=>t("button",{type:"button",class:N(["btn btn-secondary",{active:e.value===i}]),onClick:u=>e.value=i,innerHTML:p},null,10,Be)),64))]))}});function Ve(s,l,o,e){const c="/api/v1",d=v([]),p=v([]);let i=null;const u={user:"home","public:local":"public?local=true",public:"public"};L(()=>{V()});function V(){D();const h=F()+"/timelines/"+u[$(e)]+"?limit=20",x={headers:{Authorization:"Bearer "+o}};fetch(h,x).then(m=>m.json()).then(function(m){d.value=m,j()}).catch(function(m){console.error(m),p.value.push(m)})}function j(){W(h=>{switch(h.event){case"update":d.value.unshift(h.payload),d.value.splice(50);break;default:console.debug(h)}})}function W(h){const x=z()+"/streaming?access_token="+o+"&stream="+$(e);i=new WebSocket(x),i.onmessage=m=>{console.debug("Got Data from Stream "+$(e));let T=JSON.parse(m.data);T.payload=JSON.parse(T.payload),h(T)},i.onopen=()=>{console.debug("WebSocket Open "+s+" "+$(e))},i.onclose=()=>{console.debug("WebSocket Close "+s+" "+$(e))}}function D(){i!==null&&(i.close(),d.value=[])}function F(){return s+c}function z(){return l+c}return{posts:d,errors:p}}function je(s,l){switch(l){case"only":return s.media_attachments.length>0;case"except":return!s.media_attachments.length;default:return!0}}const We={class:"btn-toolbar mb-2",role:"toolbar","aria-label":"toolbar"},De={key:0,class:"alert alert-danger"},Fe=t("p",null,[t("strong",null,"Whoops!"),S(" Something went wrong!")],-1),ze=t("hr",null,null,-1),Ae=w({__name:"UserTimeline",props:{domain:{},streaming:{},token:{}},setup(s){const l=s,o=v("public:local"),e=v("normal"),{posts:c,errors:_}=Ve(l.domain,l.streaming,l.token,o),d=q(()=>c.value.filter(p=>je(p,e.value)));return(p,i)=>(a(),r("div",null,[t("div",We,[M(Se,{onChanged:i[0]||(i[0]=u=>o.value=u)}),M(Oe,{onChanged:i[1]||(i[1]=u=>e.value=u)})]),n(_).length>0?(a(),r("div",De,[Fe,t("ul",null,[(a(!0),r(g,null,b(n(_),u=>(a(),r("li",null,y(u),1))),256))])])):f("",!0),M(He,null,{default:G(()=>[(a(!0),r(g,null,b(d.value,u=>(a(),r("div",{key:u.id},[u.reblog?(a(),C(ie,{key:0,post:u},null,8,["post"])):(a(),C($e,{key:1,post:u},null,8,["post"])),ze]))),128))]),_:1})]))}}),O=I({});O.component("tt-user-timeline",Ae);O.mount("#app");k(document.body);
