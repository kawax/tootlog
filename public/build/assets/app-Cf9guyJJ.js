import{l as q,a as A,f as F,p as z,t as J,o,c as s,b as t,u as r,d as L,e as x,g as d,F as h,r as g,h as P,i as U,j as X,k as G,m as I,w as K,n as w,q as Q,s as M,v as Y}from"./vendor-CldC8iq5.js";window._=q;window.axios=A;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function T(e){return F(z(e),"yyyy-MM-dd HH:mm:ss")}function b(e){return J.parse(e)}function y(e){return e.display_name?b(e.display_name):e.username}const Z={class:"badge bg-info ms-1"},ee=["src"],te=["innerHTML"],ne={class:"d-flex m-1 p-1"},oe={class:"flex-shrink-0"},se=["href"],le=["src"],ae={class:"flex-grow-1 ms-3"},re=["href","innerHTML"],ie={class:"text-muted"},ce=["innerHTML"],ue=["innerHTML"],de=["href"],me=["src"],fe=["href"],he={__name:"TimelineReblog",props:{post:Object},setup(e){return(c,a)=>(o(),s("div",null,[t("span",Z,[t("img",{class:"rounded-circle toot-icon-small",src:e.post.account.avatar},null,8,ee),t("span",{innerHTML:r(y)(e.post.account)},null,8,te),L(" reblogged ")]),t("div",ne,[t("div",oe,[t("a",{href:e.post.reblog.account.url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[t("img",{class:"rounded toot-icon",src:e.post.reblog.account.avatar},null,8,le)],8,se)]),t("div",ae,[t("h4",null,[t("a",{href:e.post.reblog.account.url,innerHTML:r(y)(e.post.reblog.account),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,re),t("small",ie," @"+x(e.post.reblog.account.acct),1)]),e.post.reblog.spoiler_text.length>0?(o(),s("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:r(b)(e.post.reblog.spoiler_text),onClick:a[0]||(a[0]=i=>{e.post.reblog.spoiler_text=""})},null,8,ce)):d("",!0),e.post.reblog.spoiler_text?d("",!0):(o(),s("div",{key:1,innerHTML:r(b)(e.post.reblog.content)},null,8,ue)),e.post.reblog.media_attachments?(o(!0),s(h,{key:2},g(e.post.reblog.media_attachments,i=>(o(),s("div",null,[t("a",{href:i.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[t("img",{src:i.preview_url,class:"img-responsive img-thumbnail"},null,8,me)],8,de)]))),256)):d("",!0),t("div",null,[t("a",{href:e.post.reblog.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},x(r(T)(e.post.reblog.created_at)),9,fe)])])])]))}},_e={class:"d-flex p-1 m-1"},ge={class:"flex-shrink-0"},be=["href"],pe=["src"],ve={class:"flex-grow-1 ms-3"},xe=["href","innerHTML"],ke={class:"text-muted"},ye=["innerHTML"],$e=["innerHTML"],we=["href"],Me=["src"],He=["href"],Le={__name:"TimelineStatus",props:{post:Object},setup(e){return(c,a)=>(o(),s("div",_e,[t("div",ge,[t("a",{href:e.post.account.url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[t("img",{class:"rounded toot-icon",src:e.post.account.avatar},null,8,pe)],8,be)]),t("div",ve,[t("h4",null,[t("a",{href:e.post.account.url,innerHTML:r(y)(e.post.account),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,xe),t("small",ke," @"+x(e.post.account.acct),1)]),e.post.spoiler_text.length>0?(o(),s("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:r(b)(e.post.spoiler_text),onClick:a[0]||(a[0]=i=>{e.post.spoiler_text=""})},null,8,ye)):d("",!0),e.post.spoiler_text?d("",!0):(o(),s("div",{key:1,innerHTML:r(b)(e.post.content)},null,8,$e)),e.post.media_attachments?(o(!0),s(h,{key:2},g(e.post.media_attachments,i=>(o(),s("div",null,[t("a",{href:i.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[t("img",{src:i.preview_url,class:"img-responsive img-thumbnail"},null,8,Me)],8,we)]))),256)):d("",!0),t("div",null,[t("a",{href:e.post.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},x(r(T)(e.post.created_at)),9,He)])])]))}},Te=(e,c)=>{const a=e.__vccOpts||e;for(const[i,p]of c)a[i]=p;return a},Se={},Ce={class:"card"},Ne={class:"card bg-white"};function Oe(e,c){return o(),s("div",Ce,[t("div",Ne,[P(e.$slots,"default")])])}const je=Te(Se,[["render",Oe]]),Be={class:"btn-toolbar mb-2",role:"toolbar","aria-label":"toolbar"},De={class:"btn-group pe-1",role:"group"},Ee=["onClick","innerHTML"],Re={class:"btn-group",role:"group"},Ve=["onClick","innerHTML"],We={key:0,class:"alert alert-danger"},qe=t("p",null,[t("strong",null,"Whoops!"),L(" Something went wrong!")],-1),Ae=t("hr",null,null,-1),H="/api/v1",Fe=50,ze={__name:"UserTimeline",props:{domain:String,streaming:String,token:String},setup(e){const c=e;let a=null;const i={user:'<i class="fa fa-home" aria-hidden="true"></i> User',"public:local":'<i class="fa fa-users" aria-hidden="true"></i> Local',public:'<i class="fa fa-globe" aria-hidden="true"></i> Federated'};let p="public:local";const C={user:"home","public:local":"public?local=true",public:"public"},N={normal:'<i class="fa fa-file-image-o" aria-hidden="true"></i> Media Default',only:'<i class="fa fa-picture-o" aria-hidden="true"></i> Only',except:'<i class="fa fa-commenting-o" aria-hidden="true"></i> Except'};let m="normal";const v=U([]);let k=[];const O=X(()=>v.value.filter(l=>V(l)));G(()=>$(p));function j(){return c.domain+H}function B(){return c.streaming+H}function $(l="public:local"){R(),p=l;const u=C[l];axios.get(j()+"/timelines/"+u+"?limit=20",{headers:{Authorization:"Bearer "+c.token}}).then(n=>{v.value=n.data,D(l)}).catch(n=>{console.log(n),typeof n.response.data=="object"?k=_.flatten(_.toArray(n.response.data)):k=["Something went wrong. Please try again."]})}function D(l="public:local"){E(l,u=>{u.event==="notification"?console.log(u):u.event==="update"&&(v.value.unshift(u.payload),v.value.splice(Fe))})}function E(l,u){a=new WebSocket(B()+"/streaming?access_token="+c.token+"&stream="+l),a.onmessage=n=>{console.log("Got Data from Stream "+l),n=JSON.parse(n.data),n.payload=JSON.parse(n.payload),u(n)},a.onclose=n=>{console.log("WebSocket Close "+l)}}function R(){_.isNull(a)||(a.close(),v.value=[])}function V(l){return m==="only"?!_.isEmpty(l.media_attachments):m==="except"?_.isEmpty(l.media_attachments):!0}return(l,u)=>(o(),s("div",null,[t("div",Be,[t("div",De,[(o(),s(h,null,g(i,(n,f)=>t("button",{type:"button",class:w(["btn btn-secondary",{active:r(p)===f}]),onClick:W=>{$(f)},innerHTML:n},null,10,Ee)),64))]),t("div",Re,[(o(),s(h,null,g(N,(n,f)=>t("button",{type:"button",class:w(["btn btn-secondary",{active:r(m)===f}]),onClick:W=>{Q(m)?m.value=f:m=f},innerHTML:n},null,10,Ve)),64))])]),r(k).length>0?(o(),s("div",We,[qe,t("ul",null,[(o(!0),s(h,null,g(r(k),n=>(o(),s("li",null,x(n),1))),256))])])):d("",!0),I(je,null,{default:K(()=>[(o(!0),s(h,null,g(O.value,n=>(o(),s("div",null,[n.reblog?(o(),M(he,{key:0,post:n},null,8,["post"])):(o(),M(Le,{key:1,post:n},null,8,["post"])),Ae]))),256))]),_:1})]))}},S=Y({});S.component("tt-user-timeline",ze);S.mount("#app");b(document.body);
