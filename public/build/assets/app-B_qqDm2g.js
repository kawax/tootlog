import{f as F,p as W,t as z,d as w,o as s,c as a,a as e,u as n,b as S,e as $,g as h,F as g,r as v,h as A,i as b,n as C,w as J,j as y,k as U,l as T,m as q,q as L,s as G}from"./vendor-czp6Momy.js";function N(r){return F(W(r),"yyyy-MM-dd HH:mm:ss")}function k(r){return z.parse(r)}function M(r){return r.display_name?k(r.display_name):r.username}const I={class:"badge bg-info ms-1"},P=["src"],R=["innerHTML"],K={class:"d-flex m-1 p-1"},Q={class:"flex-shrink-0"},X=["href"],Y=["src"],Z={class:"flex-grow-1 ms-3"},ee=["href","innerHTML"],te={class:"text-muted"},ne=["innerHTML"],oe=["innerHTML"],se=["href"],re=["src"],ae=["href"],le=w({__name:"TimelineReblog",props:{post:{}},setup(r){const i=r,o=i.post.reblog,t=i.post.reblog.account;return(c,_)=>(s(),a("div",null,[e("span",I,[e("img",{class:"rounded-circle toot-icon-small",src:c.post.account.avatar},null,8,P),e("span",{innerHTML:n(M)(c.post.account)},null,8,R),S(" reblogged ")]),e("div",K,[e("div",Q,[e("a",{href:n(t).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[e("img",{class:"rounded toot-icon",src:n(t).avatar},null,8,Y)],8,X)]),e("div",Z,[e("h4",null,[e("a",{href:n(t).url,innerHTML:n(M)(n(t)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,ee),e("small",te," @"+$(n(t).acct),1)]),n(o).spoiler_text.length>0?(s(),a("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:n(k)(n(o).spoiler_text),onClick:_[0]||(_[0]=l=>{n(o).spoiler_text=""})},null,8,ne)):h("",!0),n(o).spoiler_text?h("",!0):(s(),a("div",{key:1,innerHTML:n(k)(n(o).content)},null,8,oe)),n(o).media_attachments?(s(!0),a(g,{key:2},v(n(o).media_attachments,l=>(s(),a("div",null,[e("a",{href:l.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[e("img",{src:l.preview_url,class:"img-responsive img-thumbnail"},null,8,re)],8,se)]))),256)):h("",!0),e("div",null,[e("a",{href:n(o).url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},$(n(N)(n(o).created_at)),9,ae)])])])]))}}),ie={class:"d-flex p-1 m-1"},ce={class:"flex-shrink-0"},ue=["href"],de=["src"],_e={class:"flex-grow-1 ms-3"},pe=["href","innerHTML"],me={class:"text-muted"},he=["innerHTML"],fe=["innerHTML"],ge=["href"],ve=["src"],be=["href"],ke=w({__name:"TimelineStatus",props:{post:{}},setup(r){const o=r.post.account;return(t,c)=>(s(),a("div",ie,[e("div",ce,[e("a",{href:n(o).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[e("img",{class:"rounded toot-icon",src:n(o).avatar},null,8,de)],8,ue)]),e("div",_e,[e("h4",null,[e("a",{href:n(o).url,innerHTML:n(M)(n(o)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,pe),e("small",me," @"+$(n(o).acct),1)]),t.post.spoiler_text.length>0?(s(),a("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:n(k)(t.post.spoiler_text),onClick:c[0]||(c[0]=_=>{t.post.spoiler_text=""})},null,8,he)):h("",!0),t.post.spoiler_text?h("",!0):(s(),a("div",{key:1,innerHTML:n(k)(t.post.content)},null,8,fe)),t.post.media_attachments?(s(!0),a(g,{key:2},v(t.post.media_attachments,_=>(s(),a("div",null,[e("a",{href:_.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[e("img",{src:_.preview_url,class:"img-responsive img-thumbnail"},null,8,ve)],8,ge)]))),256)):h("",!0),e("div",null,[e("a",{href:t.post.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},$(n(N)(t.post.created_at)),9,be)])])]))}}),$e=(r,i)=>{const o=r.__vccOpts||r;for(const[t,c]of i)o[t]=c;return o},ye={},we={class:"card"},xe={class:"card bg-white"};function Te(r,i){return s(),a("div",we,[e("div",xe,[A(r.$slots,"default")])])}const Me=$e(ye,[["render",Te]]),He={class:"btn-group pe-1",role:"group"},Le=["onClick","innerHTML"],Se=w({__name:"TypeSwitch",emits:["changed"],setup(r,{emit:i}){const o=i,t=b("public:local"),c={user:'<i class="fa fa-home" aria-hidden="true"></i> User',"public:local":'<i class="fa fa-users" aria-hidden="true"></i> Local',public:'<i class="fa fa-globe" aria-hidden="true"></i> Federated'};function _(l){t.value=l,o("changed",l)}return(l,f)=>(s(),a("div",He,[(s(),a(g,null,v(c,(u,m)=>e("button",{type:"button",class:C(["btn btn-secondary",{active:t.value===m}]),onClick:d=>_(m),innerHTML:u},null,10,Le)),64))]))}}),Ce={class:"btn-group",role:"group"},Ne=["onClick","innerHTML"],Be=w({__name:"MediaSwitch",emits:["changed"],setup(r,{emit:i}){const o=i,t=b("normal"),c={normal:'<i class="fa fa-file-image-o" aria-hidden="true"></i> Media Default',only:'<i class="fa fa-picture-o" aria-hidden="true"></i> Only',except:'<i class="fa fa-commenting-o" aria-hidden="true"></i> Except'};function _(l){t.value=l,o("changed",l)}return(l,f)=>(s(),a("div",Ce,[(s(),a(g,null,v(c,(u,m)=>e("button",{type:"button",class:C(["btn btn-secondary",{active:t.value===m}]),onClick:d=>_(m),innerHTML:u},null,10,Ne)),64))]))}});function Oe(r,i,o,t){const c="/api/v1",l=b([]),f=b([]);let u=null;const m={user:"home","public:local":"public?local=true",public:"public"};J(()=>{d()});function d(){j(),fetch(D()+"/timelines/"+m[y(t)]+"?limit=20",{headers:{Authorization:"Bearer "+i}}).then(p=>p.json()).then(function(p){l.value=p,O()}).catch(function(p){console.error(p),f.value.push(p)})}function O(){V(p=>{p.event==="notification"?console.log(p):p.event==="update"&&(l.value.unshift(p.payload),l.value.splice(50))})}function V(p){u=new WebSocket(E()+"/streaming?access_token="+i+"&stream="+y(t)),u.onmessage=H=>{console.log("Got Data from Stream "+y(t));let x=JSON.parse(H.data);x.payload=JSON.parse(x.payload),p(x)},u.onclose=H=>{console.log("WebSocket Close "+y(t))}}function j(){u!==null&&(u.close(),l.value=[])}function D(){return r+c}function E(){return o+c}return{posts:l,errors:f}}const Ve={class:"btn-toolbar mb-2",role:"toolbar","aria-label":"toolbar"},je={key:0,class:"alert alert-danger"},De=e("p",null,[e("strong",null,"Whoops!"),S(" Something went wrong!")],-1),Ee=e("hr",null,null,-1),Fe={__name:"UserTimeline",props:{domain:String,streaming:String,token:String},setup(r){const i=r,o=b("public:local"),t=b("normal"),c=U(()=>_.value.filter(u=>f(u))),{posts:_,errors:l}=Oe(i.domain,i.token,i.streaming,o);function f(u){switch(t.value){case"only":return u.media_attachments.length;case"except":return!u.media_attachments.length;default:return!0}}return(u,m)=>(s(),a("div",null,[e("div",Ve,[T(Se,{onChanged:m[0]||(m[0]=d=>o.value=d)}),T(Be,{onChanged:m[1]||(m[1]=d=>t.value=d)})]),n(l).length>0?(s(),a("div",je,[De,e("ul",null,[(s(!0),a(g,null,v(n(l),d=>(s(),a("li",null,$(d),1))),256))])])):h("",!0),T(Me,null,{default:q(()=>[(s(!0),a(g,null,v(c.value,d=>(s(),a("div",{key:d.id},[d.reblog?(s(),L(le,{key:0,post:d},null,8,["post"])):(s(),L(ke,{key:1,post:d},null,8,["post"])),Ee]))),128))]),_:1})]))}},B=G({});B.component("tt-user-timeline",Fe);B.mount("#app");k(document.body);
