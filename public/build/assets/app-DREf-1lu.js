import{f as F,p as W,t as z,d as y,o as r,c as a,a as e,u as n,b as S,e as k,g as h,F as f,r as g,h as A,i as b,n as C,w as J,j as $,k as U,l as T,m as q,q as L,s as G}from"./vendor-czp6Momy.js";function N(s){return F(W(s),"yyyy-MM-dd HH:mm:ss")}function v(s){return z.parse(s)}function M(s){return s.display_name?v(s.display_name):s.username}const I={class:"badge bg-info ms-1"},P=["src"],R=["innerHTML"],K={class:"d-flex m-1 p-1"},Q={class:"flex-shrink-0"},X=["href"],Y=["src"],Z={class:"flex-grow-1 ms-3"},ee=["href","innerHTML"],te={class:"text-muted"},ne=["innerHTML"],oe=["innerHTML"],se=["href"],re=["src"],ae=["href"],le=y({__name:"TimelineReblog",props:{post:{}},setup(s){const l=s,o=l.post.reblog,t=l.post.reblog.account;return(u,d)=>(r(),a("div",null,[e("span",I,[e("img",{class:"rounded-circle toot-icon-small",src:u.post.account.avatar},null,8,P),e("span",{innerHTML:n(M)(u.post.account)},null,8,R),S(" reblogged ")]),e("div",K,[e("div",Q,[e("a",{href:n(t).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[e("img",{class:"rounded toot-icon",src:n(t).avatar},null,8,Y)],8,X)]),e("div",Z,[e("h4",null,[e("a",{href:n(t).url,innerHTML:n(M)(n(t)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,ee),e("small",te," @"+k(n(t).acct),1)]),n(o).spoiler_text.length>0?(r(),a("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:n(v)(n(o).spoiler_text),onClick:d[0]||(d[0]=i=>{n(o).spoiler_text=""})},null,8,ne)):h("",!0),n(o).spoiler_text?h("",!0):(r(),a("div",{key:1,innerHTML:n(v)(n(o).content)},null,8,oe)),n(o).media_attachments?(r(!0),a(f,{key:2},g(n(o).media_attachments,i=>(r(),a("div",null,[e("a",{href:i.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[e("img",{src:i.preview_url,class:"img-responsive img-thumbnail"},null,8,re)],8,se)]))),256)):h("",!0),e("div",null,[e("a",{href:n(o).url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},k(n(N)(n(o).created_at)),9,ae)])])])]))}}),ie={class:"d-flex p-1 m-1"},ce={class:"flex-shrink-0"},ue=["href"],de=["src"],_e={class:"flex-grow-1 ms-3"},pe=["href","innerHTML"],me={class:"text-muted"},he=["innerHTML"],fe=["innerHTML"],ge=["href"],be=["src"],ve=["href"],ke=y({__name:"TimelineStatus",props:{post:{}},setup(s){const o=s.post.account;return(t,u)=>(r(),a("div",ie,[e("div",ce,[e("a",{href:n(o).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[e("img",{class:"rounded toot-icon",src:n(o).avatar},null,8,de)],8,ue)]),e("div",_e,[e("h4",null,[e("a",{href:n(o).url,innerHTML:n(M)(n(o)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,pe),e("small",me," @"+k(n(o).acct),1)]),t.post.spoiler_text.length>0?(r(),a("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:n(v)(t.post.spoiler_text),onClick:u[0]||(u[0]=d=>{t.post.spoiler_text=""})},null,8,he)):h("",!0),t.post.spoiler_text?h("",!0):(r(),a("div",{key:1,innerHTML:n(v)(t.post.content)},null,8,fe)),t.post.media_attachments?(r(!0),a(f,{key:2},g(t.post.media_attachments,d=>(r(),a("div",null,[e("a",{href:d.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[e("img",{src:d.preview_url,class:"img-responsive img-thumbnail"},null,8,be)],8,ge)]))),256)):h("",!0),e("div",null,[e("a",{href:t.post.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},k(n(N)(t.post.created_at)),9,ve)])])]))}}),$e=(s,l)=>{const o=s.__vccOpts||s;for(const[t,u]of l)o[t]=u;return o},ye={},we={class:"card"},xe={class:"card bg-white"};function Te(s,l){return r(),a("div",we,[e("div",xe,[A(s.$slots,"default")])])}const Me=$e(ye,[["render",Te]]),He={class:"btn-group pe-1",role:"group"},Le=["onClick","innerHTML"],Se=y({__name:"TypeSwitch",emits:["changed"],setup(s,{emit:l}){const o=l,t=b("public:local"),u={user:'<i class="fa fa-home" aria-hidden="true"></i> User',"public:local":'<i class="fa fa-users" aria-hidden="true"></i> Local',public:'<i class="fa fa-globe" aria-hidden="true"></i> Federated'};function d(i){t.value=i,o("changed",i)}return(i,m)=>(r(),a("div",He,[(r(),a(f,null,g(u,(_,c)=>e("button",{type:"button",class:C(["btn btn-secondary",{active:t.value===c}]),onClick:w=>d(c),innerHTML:_},null,10,Le)),64))]))}}),Ce={class:"btn-group",role:"group"},Ne=["onClick","innerHTML"],Be=y({__name:"MediaSwitch",emits:["changed"],setup(s,{emit:l}){const o=l,t=b("normal"),u={normal:'<i class="fa fa-file-image-o" aria-hidden="true"></i> Media Default',only:'<i class="fa fa-picture-o" aria-hidden="true"></i> Only',except:'<i class="fa fa-commenting-o" aria-hidden="true"></i> Except'};function d(i){t.value=i,o("changed",i)}return(i,m)=>(r(),a("div",Ce,[(r(),a(f,null,g(u,(_,c)=>e("button",{type:"button",class:C(["btn btn-secondary",{active:t.value===c}]),onClick:w=>d(c),innerHTML:_},null,10,Ne)),64))]))}});function Oe(s,l,o,t){const u="/api/v1",i=b([]),m=b([]);let _=null;const c={user:"home","public:local":"public?local=true",public:"public"};J(()=>{w()});function w(){j(),fetch(D()+"/timelines/"+c[$(t)]+"?limit=20",{headers:{Authorization:"Bearer "+l}}).then(p=>p.json()).then(function(p){i.value=p,O()}).catch(function(p){console.error(p),m.value.push(p)})}function O(){V(p=>{switch(p.event){case"update":i.value.unshift(p.payload),i.value.splice(50);break;default:console.debug(p)}})}function V(p){_=new WebSocket(E()+"/streaming?access_token="+l+"&stream="+$(t)),_.onmessage=H=>{console.debug("Got Data from Stream "+$(t));let x=JSON.parse(H.data);x.payload=JSON.parse(x.payload),p(x)},_.onclose=H=>{console.log("WebSocket Close "+$(t))}}function j(){_!==null&&(_.close(),i.value=[])}function D(){return s+u}function E(){return o+u}return{posts:i,errors:m}}function Ve(s,l){switch(l){case"only":return s.media_attachments.length;case"except":return!s.media_attachments.length;default:return!0}}const je={class:"btn-toolbar mb-2",role:"toolbar","aria-label":"toolbar"},De={key:0,class:"alert alert-danger"},Ee=e("p",null,[e("strong",null,"Whoops!"),S(" Something went wrong!")],-1),Fe=e("hr",null,null,-1),We={__name:"UserTimeline",props:{domain:String,streaming:String,token:String},setup(s){const l=s,o=b("public:local"),t=b("normal"),{posts:u,errors:d}=Oe(l.domain,l.token,l.streaming,o),i=U(()=>u.value.filter(m=>Ve(m,t.value)));return(m,_)=>(r(),a("div",null,[e("div",je,[T(Se,{onChanged:_[0]||(_[0]=c=>o.value=c)}),T(Be,{onChanged:_[1]||(_[1]=c=>t.value=c)})]),n(d).length>0?(r(),a("div",De,[Ee,e("ul",null,[(r(!0),a(f,null,g(n(d),c=>(r(),a("li",null,k(c),1))),256))])])):h("",!0),T(Me,null,{default:q(()=>[(r(!0),a(f,null,g(i.value,c=>(r(),a("div",{key:c.id},[c.reblog?(r(),L(le,{key:0,post:c},null,8,["post"])):(r(),L(ke,{key:1,post:c},null,8,["post"])),Fe]))),128))]),_:1})]))}},B=G({});B.component("tt-user-timeline",We);B.mount("#app");v(document.body);
