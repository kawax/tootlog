import{l as W,a as q,f as A,p as F,t as R,o as n,c as o,b as t,u as d,d as C,e as $,g,F as b,r as v,h as z,i as k,n as S,j as J,k as P,m as M,w as U,q as H,s as X}from"./vendor-BKh_N5hN.js";window._=W;window.axios=q;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function N(e){return A(F(e),"yyyy-MM-dd HH:mm:ss")}function x(e){return R.parse(e)}function T(e){return e.display_name?x(e.display_name):e.username}const G={class:"badge bg-info ms-1"},I=["src"],K=["innerHTML"],Q={class:"d-flex m-1 p-1"},Y={class:"flex-shrink-0"},Z=["href"],ee=["src"],te={class:"flex-grow-1 ms-3"},ne=["href","innerHTML"],oe={class:"text-muted"},se=["innerHTML"],ae=["innerHTML"],le=["href"],re=["src"],ie=["href"],ce={__name:"TimelineReblog",props:{post:Object},setup(e){return(c,s)=>(n(),o("div",null,[t("span",G,[t("img",{class:"rounded-circle toot-icon-small",src:e.post.account.avatar},null,8,I),t("span",{innerHTML:d(T)(e.post.account)},null,8,K),C(" reblogged ")]),t("div",Q,[t("div",Y,[t("a",{href:e.post.reblog.account.url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[t("img",{class:"rounded toot-icon",src:e.post.reblog.account.avatar},null,8,ee)],8,Z)]),t("div",te,[t("h4",null,[t("a",{href:e.post.reblog.account.url,innerHTML:d(T)(e.post.reblog.account),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,ne),t("small",oe," @"+$(e.post.reblog.account.acct),1)]),e.post.reblog.spoiler_text.length>0?(n(),o("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:d(x)(e.post.reblog.spoiler_text),onClick:s[0]||(s[0]=a=>{e.post.reblog.spoiler_text=""})},null,8,se)):g("",!0),e.post.reblog.spoiler_text?g("",!0):(n(),o("div",{key:1,innerHTML:d(x)(e.post.reblog.content)},null,8,ae)),e.post.reblog.media_attachments?(n(!0),o(b,{key:2},v(e.post.reblog.media_attachments,a=>(n(),o("div",null,[t("a",{href:a.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[t("img",{src:a.preview_url,class:"img-responsive img-thumbnail"},null,8,re)],8,le)]))),256)):g("",!0),t("div",null,[t("a",{href:e.post.reblog.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},$(d(N)(e.post.reblog.created_at)),9,ie)])])])]))}},ue={class:"d-flex p-1 m-1"},de={class:"flex-shrink-0"},me=["href"],_e=["src"],he={class:"flex-grow-1 ms-3"},fe=["href","innerHTML"],ge={class:"text-muted"},pe=["innerHTML"],be=["innerHTML"],ve=["href"],xe=["src"],ye=["href"],ke={__name:"TimelineStatus",props:{post:Object},setup(e){return(c,s)=>(n(),o("div",ue,[t("div",de,[t("a",{href:e.post.account.url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[t("img",{class:"rounded toot-icon",src:e.post.account.avatar},null,8,_e)],8,me)]),t("div",he,[t("h4",null,[t("a",{href:e.post.account.url,innerHTML:d(T)(e.post.account),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,fe),t("small",ge," @"+$(e.post.account.acct),1)]),e.post.spoiler_text.length>0?(n(),o("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:d(x)(e.post.spoiler_text),onClick:s[0]||(s[0]=a=>{e.post.spoiler_text=""})},null,8,pe)):g("",!0),e.post.spoiler_text?g("",!0):(n(),o("div",{key:1,innerHTML:d(x)(e.post.content)},null,8,be)),e.post.media_attachments?(n(!0),o(b,{key:2},v(e.post.media_attachments,a=>(n(),o("div",null,[t("a",{href:a.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[t("img",{src:a.preview_url,class:"img-responsive img-thumbnail"},null,8,xe)],8,ve)]))),256)):g("",!0),t("div",null,[t("a",{href:e.post.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},$(d(N)(e.post.created_at)),9,ye)])])]))}},$e=(e,c)=>{const s=e.__vccOpts||e;for(const[a,h]of c)s[a]=h;return s},we={},Me={class:"card"},Te={class:"card bg-white"};function He(e,c){return n(),o("div",Me,[t("div",Te,[z(e.$slots,"default")])])}const Le=$e(we,[["render",He]]),Ce={class:"btn-group pe-1",role:"group"},Se=["onClick","innerHTML"],Ne={__name:"TypeSwitch",emits:["typeChanged"],setup(e,{emit:c}){const s=c,a=k("public:local"),h={user:'<i class="fa fa-home" aria-hidden="true"></i> User',"public:local":'<i class="fa fa-users" aria-hidden="true"></i> Local',public:'<i class="fa fa-globe" aria-hidden="true"></i> Federated'};function f(u){a.value=u,s("typeChanged",u)}return(u,p)=>(n(),o("div",Ce,[(n(),o(b,null,v(h,(y,m)=>t("button",{type:"button",class:S(["btn btn-secondary",{active:a.value===m}]),onClick:w=>f(m),innerHTML:y},null,10,Se)),64))]))}},Oe={class:"btn-group",role:"group"},je=["onClick","innerHTML"],Be={__name:"MediaSwitch",emits:["mediaChanged"],setup(e,{emit:c}){const s=c,a=k("normal"),h={normal:'<i class="fa fa-file-image-o" aria-hidden="true"></i> Media Default',only:'<i class="fa fa-picture-o" aria-hidden="true"></i> Only',except:'<i class="fa fa-commenting-o" aria-hidden="true"></i> Except'};function f(u){a.value=u,s("mediaChanged",u)}return(u,p)=>(n(),o("div",Oe,[(n(),o(b,null,v(h,(y,m)=>t("button",{type:"button",class:S(["btn btn-secondary",{active:a.value===m}]),onClick:w=>f(m),innerHTML:y},null,10,je)),64))]))}},De={class:"btn-toolbar mb-2",role:"toolbar","aria-label":"toolbar"},Ee={key:0,class:"alert alert-danger"},Ve=t("p",null,[t("strong",null,"Whoops!"),C(" Something went wrong!")],-1),We=t("hr",null,null,-1),L="/api/v1",qe=50,Ae={__name:"UserTimeline",props:{domain:String,streaming:String,token:String},setup(e){const c=e;let s=null;const a=k("public:local"),h={user:"home","public:local":"public?local=true",public:"public"},f=k("normal"),u=k([]);let p=[];const y=J(()=>u.value.filter(l=>D(l)));P(()=>m());function m(l="public:local"){B(),a.value=l,axios.get(E()+"/timelines/"+h[l]+"?limit=20",{headers:{Authorization:"Bearer "+c.token}}).then(r=>{u.value=r.data,w(l)}).catch(r=>{console.log(r),typeof r.response.data=="object"?p=_.flatten(_.toArray(r.response.data)):p=["Something went wrong. Please try again."]})}function w(l="public:local"){j(l,r=>{r.event==="notification"?console.log(r):r.event==="update"&&(u.value.unshift(r.payload),u.value.splice(qe))})}function j(l,r){s=new WebSocket(V()+"/streaming?access_token="+c.token+"&stream="+l),s.onmessage=i=>{console.log("Got Data from Stream "+l),i=JSON.parse(i.data),i.payload=JSON.parse(i.payload),r(i)},s.onclose=i=>{console.log("WebSocket Close "+l)}}function B(){_.isNull(s)||(s.close(),u.value=[])}function D(l){return f.value==="only"?!_.isEmpty(l.media_attachments):f.value==="except"?_.isEmpty(l.media_attachments):!0}function E(){return c.domain+L}function V(){return c.streaming+L}return(l,r)=>(n(),o("div",null,[t("div",De,[M(Ne,{onTypeChanged:m}),M(Be,{onMediaChanged:r[0]||(r[0]=i=>f.value=i)})]),d(p).length>0?(n(),o("div",Ee,[Ve,t("ul",null,[(n(!0),o(b,null,v(d(p),i=>(n(),o("li",null,$(i),1))),256))])])):g("",!0),M(Le,null,{default:U(()=>[(n(!0),o(b,null,v(y.value,i=>(n(),o("div",null,[i.reblog?(n(),H(ce,{key:0,post:i},null,8,["post"])):(n(),H(ke,{key:1,post:i},null,8,["post"])),We]))),256))]),_:1})]))}},O=X({});O.component("tt-user-timeline",Ae);O.mount("#app");x(document.body);
