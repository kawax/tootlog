import{l as W,a as q,f as A,p as F,t as R,o as s,c as a,b as e,u as n,d as C,e as $,g,F as v,r as x,h as z,i as b,n as S,j as J,k as P,m as M,w as U,q as H,s as X}from"./vendor-BKh_N5hN.js";window._=W;window.axios=q;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";function N(t){return A(F(t),"yyyy-MM-dd HH:mm:ss")}function y(t){return R.parse(t)}function T(t){return t.display_name?y(t.display_name):t.username}const G={class:"badge bg-info ms-1"},I=["src"],K=["innerHTML"],Q={class:"d-flex m-1 p-1"},Y={class:"flex-shrink-0"},Z=["href"],ee=["src"],te={class:"flex-grow-1 ms-3"},ne=["href","innerHTML"],oe={class:"text-muted"},se=["innerHTML"],ae=["innerHTML"],le=["href"],re=["src"],ie=["href"],ce={__name:"TimelineReblog",props:{post:Object},setup(t){const r=t,o=r.post.reblog,l=r.post.reblog.account;return(i,c)=>(s(),a("div",null,[e("span",G,[e("img",{class:"rounded-circle toot-icon-small",src:t.post.account.avatar},null,8,I),e("span",{innerHTML:n(T)(t.post.account)},null,8,K),C(" reblogged ")]),e("div",Q,[e("div",Y,[e("a",{href:n(l).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[e("img",{class:"rounded toot-icon",src:n(l).avatar},null,8,ee)],8,Z)]),e("div",te,[e("h4",null,[e("a",{href:n(l).url,innerHTML:n(T)(n(l)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,ne),e("small",oe," @"+$(n(l).acct),1)]),n(o).spoiler_text.length>0?(s(),a("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:n(y)(n(o).spoiler_text),onClick:c[0]||(c[0]=p=>{n(o).spoiler_text=""})},null,8,se)):g("",!0),n(o).spoiler_text?g("",!0):(s(),a("div",{key:1,innerHTML:n(y)(n(o).content)},null,8,ae)),n(o).media_attachments?(s(!0),a(v,{key:2},x(n(o).media_attachments,p=>(s(),a("div",null,[e("a",{href:p.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[e("img",{src:p.preview_url,class:"img-responsive img-thumbnail"},null,8,re)],8,le)]))),256)):g("",!0),e("div",null,[e("a",{href:n(o).url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},$(n(N)(n(o).created_at)),9,ie)])])])]))}},ue={class:"d-flex p-1 m-1"},de={class:"flex-shrink-0"},_e=["href"],me=["src"],pe={class:"flex-grow-1 ms-3"},he=["href","innerHTML"],fe={class:"text-muted"},ge=["innerHTML"],be=["innerHTML"],ve=["href"],xe=["src"],ye=["href"],ke={__name:"TimelineStatus",props:{post:Object},setup(t){const o=t.post.account;return(l,i)=>(s(),a("div",ue,[e("div",de,[e("a",{href:n(o).url,target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},[e("img",{class:"rounded toot-icon",src:n(o).avatar},null,8,me)],8,_e)]),e("div",pe,[e("h4",null,[e("a",{href:n(o).url,innerHTML:n(T)(n(o)),target:"_blank",rel:"nofollow noopener",class:"text-decoration-none"},null,8,he),e("small",fe," @"+$(n(o).acct),1)]),t.post.spoiler_text.length>0?(s(),a("button",{key:0,class:"btn btn-warning btn-sm",type:"button",innerHTML:n(y)(t.post.spoiler_text),onClick:i[0]||(i[0]=c=>{t.post.spoiler_text=""})},null,8,ge)):g("",!0),t.post.spoiler_text?g("",!0):(s(),a("div",{key:1,innerHTML:n(y)(t.post.content)},null,8,be)),t.post.media_attachments?(s(!0),a(v,{key:2},x(t.post.media_attachments,c=>(s(),a("div",null,[e("a",{href:c.url,target:"_blank",ref_for:!0,ref:"nofollow noopener",class:"text-decoration-none"},[e("img",{src:c.preview_url,class:"img-responsive img-thumbnail"},null,8,xe)],8,ve)]))),256)):g("",!0),e("div",null,[e("a",{href:t.post.url,target:"_blank",ref:"nofollow noopener",class:"text-decoration-none"},$(n(N)(t.post.created_at)),9,ye)])])]))}},$e=(t,r)=>{const o=t.__vccOpts||t;for(const[l,i]of r)o[l]=i;return o},we={},Me={class:"card"},Te={class:"card bg-white"};function He(t,r){return s(),a("div",Me,[e("div",Te,[z(t.$slots,"default")])])}const Le=$e(we,[["render",He]]),Ce={class:"btn-group pe-1",role:"group"},Se=["onClick","innerHTML"],Ne={__name:"TypeSwitch",emits:["typeChanged"],setup(t,{emit:r}){const o=r,l=b("public:local"),i={user:'<i class="fa fa-home" aria-hidden="true"></i> User',"public:local":'<i class="fa fa-users" aria-hidden="true"></i> Local',public:'<i class="fa fa-globe" aria-hidden="true"></i> Federated'};function c(p){l.value=p,o("typeChanged",p)}return(p,f)=>(s(),a("div",Ce,[(s(),a(v,null,x(i,(k,h)=>e("button",{type:"button",class:S(["btn btn-secondary",{active:l.value===h}]),onClick:w=>c(h),innerHTML:k},null,10,Se)),64))]))}},Oe={class:"btn-group",role:"group"},je=["onClick","innerHTML"],Be={__name:"MediaSwitch",emits:["mediaChanged"],setup(t,{emit:r}){const o=r,l=b("normal"),i={normal:'<i class="fa fa-file-image-o" aria-hidden="true"></i> Media Default',only:'<i class="fa fa-picture-o" aria-hidden="true"></i> Only',except:'<i class="fa fa-commenting-o" aria-hidden="true"></i> Except'};function c(p){l.value=p,o("mediaChanged",p)}return(p,f)=>(s(),a("div",Oe,[(s(),a(v,null,x(i,(k,h)=>e("button",{type:"button",class:S(["btn btn-secondary",{active:l.value===h}]),onClick:w=>c(h),innerHTML:k},null,10,je)),64))]))}},De={class:"btn-toolbar mb-2",role:"toolbar","aria-label":"toolbar"},Ee={key:0,class:"alert alert-danger"},Ve=e("p",null,[e("strong",null,"Whoops!"),C(" Something went wrong!")],-1),We=e("hr",null,null,-1),L="/api/v1",qe=50,Ae={__name:"UserTimeline",props:{domain:String,streaming:String,token:String},setup(t){const r=t,o=b("public:local"),l=b("normal"),i=b([]),c=b([]),p={user:"home","public:local":"public?local=true",public:"public"};let f=null;const k=J(()=>i.value.filter(u=>D(u)));P(()=>h());function h(u="public:local"){B(),o.value=u,axios.get(E()+"/timelines/"+p[u]+"?limit=20",{headers:{Authorization:"Bearer "+r.token}}).then(d=>{i.value=d.data,w(u)}).catch(d=>{console.log(d),typeof d.response.data=="object"?c.value=_.flatten(_.toArray(d.response.data)):c.value=["Something went wrong. Please try again."]})}function w(u="public:local"){j(u,d=>{d.event==="notification"?console.log(d):d.event==="update"&&(i.value.unshift(d.payload),i.value.splice(qe))})}function j(u,d){f=new WebSocket(V()+"/streaming?access_token="+r.token+"&stream="+u),f.onmessage=m=>{console.log("Got Data from Stream "+u),m=JSON.parse(m.data),m.payload=JSON.parse(m.payload),d(m)},f.onclose=m=>{console.log("WebSocket Close "+u)}}function B(){_.isNull(f)||(f.close(),i.value=[])}function D(u){return l.value==="only"?!_.isEmpty(u.media_attachments):l.value==="except"?_.isEmpty(u.media_attachments):!0}function E(){return r.domain+L}function V(){return r.streaming+L}return(u,d)=>(s(),a("div",null,[e("div",De,[M(Ne,{onTypeChanged:h}),M(Be,{onMediaChanged:d[0]||(d[0]=m=>l.value=m)})]),c.value.length>0?(s(),a("div",Ee,[Ve,e("ul",null,[(s(!0),a(v,null,x(c.value,m=>(s(),a("li",null,$(m),1))),256))])])):g("",!0),M(Le,null,{default:U(()=>[(s(!0),a(v,null,x(k.value,m=>(s(),a("div",{key:m.id},[m.reblog?(s(),H(ce,{key:0,post:m},null,8,["post"])):(s(),H(ke,{key:1,post:m},null,8,["post"])),We]))),128))]),_:1})]))}},O=X({});O.component("tt-user-timeline",Ae);O.mount("#app");y(document.body);
